!function(nord,SOASTA,undefined){var rum={},settings={version:"v3.0.5",fileName:"fsrum.js",tracer:!0,debug:!1,BoomerangWaitTime:10,nordRumWaitTime:100,nordRumMaxTries:50},rumPerformanceMetrics={scriptLoadedTime:(new Date).valueOf(),fsrumIsReadyWaitTimeMs:-1,boomrIsReadyWaitTimeMs:-1},stackTrace=[],watchedValues=[],nordRumTries=1,host=window.location.hostname.split("."),hostNameLowerCase=window.location.hostname.toLowerCase(),addTrace=function(e){try{settings.tracer&&stackTrace.push(e)}catch(r){console.log(settings.fileName+": "+r.message+"\nInner exception: "+e+"\n")}},watchValue=function(e,r){settings.debug&&watchedValues.push(e+": "+r)},NordAnalytics=function(){this.getRawSettingCategory=function(e){var r=window.nord&&window.nord.config&&window.nord.config.settings;if(r){var t=window.nord.config.settings;if(t&&t.length>0)for(var n=0;n<t.length;n++)if(t[n][e])return t[n][e]}return null},this.getRawAnalytics=function(){return this.getRawSettingCategory("analytics")},this.rawAnalytics=this.getRawAnalytics(),this.isDefinedNordConfigAnalytics=function(){var e=window.nord&&window.nord.config&&window.nord.config.settings&&window.nord.config.settings.analytics;return e},this.getCategoryName=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.categoryName?e=this.rawAnalytics.categoryName:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.categoryName&&(e=window.nord.config.settings.analytics.categoryName),e},this.getPageType=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.pageType?e=this.rawAnalytics.pageType:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.pageType&&(e=window.nord.config.settings.analytics.pageType),e},this.getPageTemplate=function(){var e=void 0;return this.rawAnalytics&&this.rawAnalytics.pageTemplate?e=this.rawAnalytics.pageTemplate:this.isDefinedNordConfigAnalytics()&&window.nord.config.settings.analytics.pageTemplate&&(e=window.nord.config.settings.analytics.pageTemplate),e}},my_nord_analytics=new NordAnalytics,isWCMPage=function(){var e=my_nord_analytics.getPageTemplate(),r=e&&"WCM"===e.toUpperCase();return r},formatForBoomr=function(e){for(var r=e,t=[[".",""],[":",""],["&amp;",""],["&",""],[",",""],["<",""],[">",""],["(",""],[")",""]],n=0;n<t.length;n++)r=r.replace(t[n][0],t[n][1]);return r},setPageId=function(){var e=my_nord_analytics.getPageType(),r=my_nord_analytics.getCategoryName();return window.PageParameters&&window.PageParameters.ioCoremetricsPageId?formatForBoomr(window.PageParameters.ioCoremetricsPageId):e?formatForBoomr(e):r?formatForBoomr(r):window.PageTypeParameters&&window.PageTypeParameters.PageType?formatForBoomr(window.PageTypeParameters.PageType):window.PageParameters&&window.PageParameters.pageName?formatForBoomr(window.PageParameters.pageName):window.PageParameters&&window.PageParameters.PageType?formatForBoomr(window.PageParameters.PageType):"Unknown"},setAppName=function(){var e=isMoovWeb()?host[1]:host[0];return e},setCartSize=function(){var e=document.getElementById("shopping-bag-count")||document.getElementById("shoppingBagCount"),r=e?parseInt(e.innerText,10)||0:0;return r},isProductPage=function(){var e=(my_nord_analytics.getPageType()||"").toLowerCase();return"product page"===e},getShoefitrABTestTitle=function(e){if(!isProductPage())return e;var r=my_nord_analytics.getRawSettingCategory("product");if(r||(r=window.nord&&window.nord.config&&window.nord.config.settings&&window.nord.config.settings.product),!r)return e;var t=(r.productType1||"").toUpperCase();if("SHOES"!==t)return e;var n=r&&r.fitRecommendation&&r.fitRecommendation.shoeFitrEligible;return n?"PRD-SHOEFITR":"PRD-NO-SHOEFITR"},setABTest=function(){if(setAppName().toLowerCase().indexOf("secure")>=0)return"Secure";if(isWCMPage()){var e=getShoefitrABTestTitle("WCM Pages");return e}return"Legacy Pages"},setFsrId=function(){for(var cookies=document.cookie.split("; "),cookie,i=0;i<cookies.length;i++)if(cookie=cookies[i].split("="),"fsr.r"===cookie[0]&&cookie[1])return eval("("+cookie[1]+")").i;return undefined},setNordSessionId=function(){return window.PageParameters&&window.PageParameters.SessionId?formatForBoomr(window.PageParameters.SessionId):window.nord&&window.nord.config&&window.nord.config.settings&&window.nord.config.settings.shopper&&window.nord.config.settings.shopper.sessionId?formatForBoomr(window.nord.config.settings.shopper.sessionId):undefined},readyToRun=function(){try{return"Unknown"!==setPageId()}catch(e){rum.logError(e)}},metrics=[["h.pg",setPageId,"pg"],["h.ab",setABTest,"abTest"],["Items_in_Cart",setCartSize,"cartItems"],["fsr.id",setFsrId,undefined],["nord.sessionId",setNordSessionId,undefined]];rum.metricsToBoomerang=function(){var e,r,t;try{if("undefined"!=typeof BOOMR){addTrace("Adding values to SOASTA..."),rumPerformanceMetrics.boomrIsReadyWaitTimeMs=(new Date).valueOf()-rumPerformanceMetrics.scriptLoadedTime;for(var n=0;n<metrics.length;n++)e="function"==typeof metrics[n][0]?metrics[n][0]():metrics[n][0],r="function"==typeof metrics[n][1]?metrics[n][1]():metrics[n][1],t="function"==typeof metrics[n][2]?metrics[n][2]():metrics[n][2],r&&(t&&(addTrace("    SOASTA["+t+"] = "+r),SOASTA[t]=r),e&&(addTrace("    BOOMR.addVar("+e+" , "+r+")"),BOOMR.addVar(e,r)))}else addTrace("BOOMR not defined, waiting "+settings.BoomerangWaitTime+"ms..."),setTimeout(rum.metricsToBoomerang,settings.BoomerangWaitTime)}catch(o){rum.logError(o)}},rum.logError=function(e){addTrace("Error! --> "+e.message||"Unknown error type")},rum.printStackTrace=function(){for(var e="****** Begin nord.rum stack trace  ******\n",r=0;r<stackTrace.length;r++)e+=r+") "+stackTrace[r]+"\n";return e=e+"******  End nord.rum stack trace  ******\n"+rum.version()+"Total tries: "+nordRumTries+"\n",e=e+"******  RUM Performance:\nfsrumIsReadyWaitTimeMs: "+rumPerformanceMetrics.fsrumIsReadyWaitTimeMs+"ms\nboomrIsReadyWaitTimeMs: "+rumPerformanceMetrics.boomrIsReadyWaitTimeMs+"ms\n"},rum.version=function(){return settings.fileName+" "+settings.version+"\n"},rum.printWatchedValues=function(){for(var e="****** Begin nord.rum watch ******\n",r=0;r<watchedValues.length;r++)e+=r+") "+watchedValues[r]+"\n";return e+"******  End nord.rum watch  ******\n"+rum.version()};var isLocalMachineDev=function(){var e="myshop.nordstrom.com"===hostNameLowerCase;return e},isMoovWeb=function(){if(isLocalMachineDev())return!1;var e=("m"===host[0].toLowerCase().substr(0,1)||"moov"===host[0].toLowerCase())&&hostNameLowerCase.indexOf(".nordstrom.com")>-1;return e},isDev=function(){var e=isLocalMachineDev()||"dev"===host[1].toLowerCase()||"mstage"===host[0].toLowerCase().substr(0,6)||hostNameLowerCase.indexOf(".dev.nordstrom")>-1;return e},isMobile=function(){return isMoovWeb()},isProdFullSite=function(){var e="shop.nordstrom.com"===hostNameLowerCase||"secure.nordstrom.com"===hostNameLowerCase;return e},isFullSite=function(){var e=/^[^\.]*?(secure|shop)\..*nordstrom\.com$/i,r=e.test(hostNameLowerCase);return r},runSOASTA=function(){var e,r,t,n=document.createElement("iframe");n.src="javascript:false",(n.frameElement||n).style.cssText="width: 0;height:0;border:0",t=document.getElementsByTagName("head")[0],t.insertBefore(n,t.firstChild);try{r=n.contentWindow.document}catch(o){e=document.domain,n.src='javascript:var d=document.open();d.domain="'+e+'";void(0);',r=n.contentWindow.document}var i="Y5J7S-HA39B-6SBRH-CKF8B-XWKBB",a="5LCB3-TKEVN-QQJHH-Q3RTT-LDNHZ",s="PRG3R-YLCTV-MRDD3-ZBPVX-2A875",c="AJ4XB-LJJD3-5HD6Q-LVWWW-6U3K2",d="N67DL-RTLYV-GD5DA-KH9DN-57JCL",m=function(){var e="";return e=isMobile()?isDev()?i:a:isFullSite()&&isDev()?s:isFullSite()&&isProdFullSite()?c:d};r.open()._l=function(){var r=this.createElement("script");e&&(this.domain=e),r.id="boomr-if-as",r.src="//c.go-mpulse.net/boomerang/"+m(),BOOMR_lstart=(new Date).getTime(),this.body.appendChild(r)},r.write('<body onload="document._l();">'),r.close()};rum.run=function(){if(readyToRun()){addTrace("Begin RUM metrics collection");try{rumPerformanceMetrics.fsrumIsReadyWaitTimeMs=(new Date).valueOf()-rumPerformanceMetrics.scriptLoadedTime}catch(e){rum.logError(e)}rum.metricsToBoomerang(),runSOASTA()}else addTrace("page not ready, waiting "+settings.nordRumWaitTime+"ms..."),nordRumTries<=settings.nordRumMaxTries?setTimeout(rum.run,settings.nordRumWaitTime):runSOASTA(),nordRumTries+=1},nord.rum=rum,rum.run()}(window.nord=window.nord||{},window.SOASTA=window.SOASTA||{});