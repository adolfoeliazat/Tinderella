
/* cachebust:true */  !function(){var e,t="thirdParty/shim/",r={"Array.isArray":Array.isArray,"Array.prototype.filter":Array.prototype.filter,"Array.prototype.forEach":Array.prototype.forEach,"Array.prototype.indexOf":Array.prototype.indexOf,"Array.prototype.map":Array.prototype.map,"Array.prototype.reduce":Array.prototype.reduce,"Date.now":Date.now,"Function.prototype.bind":Function.prototype.bind,"Object.create":Object.create,"Object.keys":Object.keys,"String.prototype.trim":String.prototype.trim,"window.console":window.console,"window.JSON":window.JSON,"window.requestAnimationFrame":window.requestAnimationFrame,"jquery.xDomainRequest":!window.XDomainRequest},n=[];for(e in r)r[e]||n.push(t+e);define("nord/feature/mainModules/polyfills",n)}(),define("nord/feature/util/console",["raygun","nord/feature/mainModules/polyfills"],function(e){function t(t){var n,a=Array.prototype.slice.call(arguments,1);a[0]instanceof Error&&(n=a.shift(),n.message&&(n.message=t.toUpperCase()+": "+n.message),e.send(n,[t,a])),r?o[t].apply(o,a):-1!==i.indexOf(t)&&s.push({method:t,args:a})}var r,n,a,i=["assert","count","dir","error","group","groupCollapsed","groupEnd","info","log","table","warn"],o=window.console,s=[];for(n in o)a=typeof o[n],"function"===a?t[n]=t.bind(0,n):"object"===a&&(t[n]=o[n]);return t.enable=function(e){var t;if(r=!0,Error.stackTraceLimit=1/0,"undefined"!=typeof e&&e)t.length=0;else for(;t=s.shift();)o[t.method].apply(o,t.args)},t.disable=function(){r=!1},t}),define("nord/feature/util/querystring",["jquery"],function(e){function t(e,t,r,n){var a,i=new RegExp("([?&])"+t+"=[^&$]*","i");return n="string"==typeof n?n:"?",a=0!==e.length?"&":n,e.match(i)?e.replace(i,"$1"+t+"="+r):e+a+t+"="+r}function r(t,r){var n,a={};if(r="string"==typeof r?r:"?","string"!=typeof t)throw new Error("nord/util/querystring: the deserialize method only accepts strings.");return n=t.indexOf(r),n>=0&&(t=t.substr(n+1)),e.each(t.split("&"),function(e,t){var r,n,i=t.split("=");i.length>0&&(r=decodeURIComponent(i.shift()),n=i.length>0?decodeURIComponent(i.shift()):void 0,"undefined"==typeof a[r]?a[r]=n:a[r].constructor===Array?a[r].push(n):a[r]=[a[r],n])}),a}function n(t,r){return r="string"==typeof r?r:"?",t=e.param(t),t=t?r+t:""}function a(t,r){function n(t,r){r=e.isFunction(r)?r():r?r:"",a.pairs[a.pairs.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)}var i;if(Array.isArray(r))r.forEach(function(e,r){a(t+"["+r+"]",e)});else if("object"===e.type(r))for(i in r)a(t+"["+i+"]",r[i]);else n(t,r)}function i(t){return a.pairs=[],e.each(t,function(e,t){a(e,t)}),a.pairs.join("&").replace(/%20/g,"+")}return{deserialize:r,serialize:n,deepSerialize:i,updateParameter:t}}),define("nord/util/object/result",[],function(){function e(e,t){if("undefined"!=typeof e&&null!==e){var r=e[t];return"function"==typeof r?r.call(e):r}}return e}),define("nord/util/object/getDeepProperty",["nord/util/object/result"],function(e){return function(t,r){var n,a=0,i=t,o=r.split("."),s=o.length;for(a;s>a;a++){if(n=e(i,o[a]),"undefined"==typeof n)return;i=n}return i}}),define("nord/util/object/setDeepProperty",[],function(){return function(e,t,r){var n,a=0,i=t.split("."),o=i.length;for(a;o>a;a++)n=i[a],e[n]=a===o-1?r:e[n]||{},e=e[n];return e}}),define("nord/feature/mainModules/config",["jquery","nord/util/object/getDeepProperty","nord/util/object/setDeepProperty","nord/feature/util/console"],function(e,t,r,n){function a(t){e.extend(!0,u,t)}function i(e){if(!e)throw new TypeError("Invalid key value.");return t(u,e)}function o(e,t){return r(u,e,t)}function s(e,t){var r=i(e);return"undefined"==typeof r?"undefined"!=typeof t?t:"":r}window.nord=window.nord||{},window.nord.config=window.nord.config||{settings:[]};var l=window.nord.config,u={};return function(){for(var e;l.settings.length;)e=l.settings.shift(),"object"==typeof e?a(e):(n.warn("config: invalid settings object was included in settings list:"),n.log(e));l.settings=u,l.settings.push=a}(),{getValue:i,getValueOrDefault:s,setValue:o}}),define("nord/feature/util/hoverIntent",["jquery"],function(e){function t(t,n){var a,i=0,o=0;0!==t.length&&(n=e.extend({},r,n),t.on("mouseenter.hoverIntent",n.descendantSelector,function(){var t=e(this);a&&a===t?o&&a===t&&clearTimeout(o):(o&&clearTimeout(o),n.enterDelay>0?i=setTimeout(function(){n.mouseenter(t)},n.enterDelay):n.mouseenter(t))}).on("mouseleave.hoverIntent",n.descendantSelector,function(){var t=e(this);a=t,o=setTimeout(function(){n.mouseleave(t)},n.delay),i&&clearTimeout(i)}))}var r={delay:400,enterDelay:200,descendantSelector:null,mouseenter:e.noop,mouseleave:e.noop};return{bind:t}}),define("nord/feature/util/keyCode",{backspace:8,tab:9,enter:13,esc:27,space:32,pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40,del:46}),define("nord/feature/navigation/primaryNav",["jquery","modernizr","nord/feature/util/hoverIntent","nord/feature/util/keyCode"],function(e,t,r,n){function a(){f=e(g),h=f.find(v);var t=f.find(".nav-category");t.each(function(){p(e(this))}),window.PointerEvent&&f.css("touch-action","none"),i(),o(),s(),l(),h.removeClass(S)}function i(){var e={enterDelay:C,delay:C,descendantSelector:v,mouseenter:function(e){u(e)},mouseleave:function(e){A&&(e.removeClass(w),u(e,!0))}};r.bind(f,e)}function o(){var t=!1;h.on("focus.primaryNavigation",y,function(){t=!0,c(e(this).closest(v))}),e(document).on("keyup.primaryNavigation",function(r){var a=e(":focus"),i=a.closest(v),o=h.filter("."+w);if(t&&!(i.length<1&&o.length<1))switch(r.which){case n.left:u(o.prev(v));break;case n.right:u(o.next(v));break;case n.esc:d();break;case n.tab:a.closest(g).length>0?i.hasClass(w)||u(i):(t=!1,d())}})}function s(){var t=e("#skip-nav"),r=e("#skip-nav-end");t.on("click.ada",function(){return r.trigger("focus"),!1}),r.on("click.ada",function(){return!1})}function l(){e("html").on("click.primaryNavigation",function(){d()}),h.on("click.primaryNavigation",y,function(t){var r=e(t.target).closest(v),n=r.hasClass(w);t.stopPropagation(),n&&A||(t.preventDefault(),c(r))})}function u(e,t){var r=e.find("a:first:visible");r.length>0&&r.trigger(t===!0?"blur":"focus")}function c(t){t.hasClass(w)||(d(),t&&t.constructor===e&&t.length>0&&(t.addClass(w),A=!1,m=setTimeout(function(){A=!0},I)))}function d(){h.removeClass(w)}function p(e){var t=function(e){return e.width()+Math.round(e.offset().left)},r=e.closest(v),n=171;t(e)>t(f)&&(e.css("left",-Math.min(Math.ceil((t(e)-t(f))/n)*n,t(e)-t(r.children("h2:first-child")))),r.addClass(P)),r.addClass(b)}var f,h,m,g="#primary-nav",v=".tab",y="h2 a",w="active",b="js-final-position",S="js-pending-setup",P="menu-realigned",C=50,A=!0,I=200;return{init:a,setActiveTab:c}}),define("nord/feature/util/scriptLoader",["jquery"],function(e){function t(t,r){return e.ajax(t,{cache:r.cache,context:r.context,dataType:"script"}).fail(function(){"warn"in window.console&&window.console.warn('scriptLoader: could not load the "'+t+'" script')})}function r(t,r){var n,a,i=new e.Deferred,o=r.containerTagName;return n=document.createElement("script"),a=!1,r.async===!0&&(n.async=!0),n.type="text/javascript",n.src=t,n.onload=n.onreadystatechange=function(){a||this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||(this.onreadystatechange=null,a=!0,i.resolve())},document.getElementsByTagName(o)[0].appendChild(n),i.promise()}function n(n,i){if(!n)throw new Error("scriptLoader: You must specify a URL to load.");return i=e.extend({},a,i),i.useAjax===!0?t(n,i):r(n,i)}var a={async:!0,cache:!0,context:this,useAjax:!1,containerTagName:"head"};return{load:n}}),define("nord/feature/util/browserVersion",["jquery","nord/config"],function(){function e(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];try{if(/trident/i.test(r[1]))return e=/\brv[ :]+(\d+(\.\d+)?)/g.exec(t)||[],"IE "+(e[1]||"");r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/([\.\d]+)/i))&&(r[2]=e[1])}catch(n){return r}return r}return{getUserAgent:e}}),define("nord/feature/util/liveChat",["jquery","nord/config","nord/feature/util/scriptLoader","nord/feature/util/browserVersion"],function(e,t,r,n){function a(){t.getValueOrDefault("shopper.environmentInfo.isPos",!1)||(e(m).addClass(g),s=e("."+c.join(", .")),l=e("#"+c.join(", #")),s.length&&r.load(d).done(i),l.length&&r.load(p).done(function(){"object"==typeof window.ATGSvcs&&window.ATGSvcs.setUOID(f)}))}function i(){var r,a=n.getUserAgent(),i=location.href.replace(location.search,""),l="production"===t.getValue("environment").toLowerCase()?"prodId":"devId";"function"==typeof window.webISChatPop&&e(m).removeClass(g),s.each(function(t,n){var a=e(n).attr("class").match(/\bliveChat[a-zA-Z0-9_\-]*\b/)[0],i=o(a);null!==i&&(r="liveChatBclMac"===a?"Live Chat":e(n).html(),"A"!==n.tagName?e(n).html('<a href="#" class="'+h+'" data-chat-id="'+i[l]+'">'+r+"</a>"):e(n).addClass(h).attr("data-chat-id",i[l]))}),e("."+h).on("click.chat",function(t){var r=["Template="+e(this).data("chatId"),"optionaldata1="+i,"optionaldata2="+a];t.preventDefault(),window.webISChatPop.apply(window,r)})}function o(e){var t=0;for(t;t<u.length;t++)if(u[t].name===e)return u[t];return null}var s,l,u=[{name:"liveChatLPcs",devId:976964,prodId:968665},{name:"liveChatLPbs",devId:976944,prodId:968039},{name:"liveChatLPws",devId:976974,prodId:970144},{name:"liveChatLPds",devId:976954,prodId:968655},{name:"liveChatCcl",devId:976964,prodId:968665},{name:"liveChatBcl",devId:976944,prodId:968039},{name:"liveChatWcl",devId:976974,prodId:970144},{name:"liveChatDcl",devId:976954,prodId:968655},{name:"liveChatBclMac",devId:976944,prodId:968039},{name:"liveChatBclMacNav",devId:976944,prodId:968039}],c=[],d="//as00.estara.com/as/InitiateCall2.php?accountid=200106301754",p="//static.atgsvcs.com/js/atgsvcs.js",f=200106301754,h="live-chat-link",m="#live-chat",g="hidden";return c=u.map(function(e){return e.name}),window.openChatPopup=function(){window.webISChatPop.apply(window,arguments)},{init:a}}),define("text",["module"],function(e){var t,r,n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,o="undefined"!=typeof location&&location.href,s=o&&location.protocol&&location.protocol.replace(/\:/,""),l=o&&location.hostname,u=o&&(location.port||void 0),c=[],d=e.config&&e.config()||{};return t={version:"2.0.3",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(i);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,r;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){r=n[t];try{e=new ActiveXObject(r)}catch(a){}if(e){n=[r];break}}return e},parseName:function(e){var t=!1,r=e.indexOf("."),n=e.substring(0,r),a=e.substring(r+1,e.length);return r=a.indexOf("!"),-1!==r&&(t=a.substring(r+1,a.length),t="strip"===t,a=a.substring(0,r)),{moduleName:n,ext:a,strip:t}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,r,n,a){var i,o,s,l=t.xdRegExp.exec(e);return l?(i=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(i&&i!==r||o&&o.toLowerCase()!==n.toLowerCase()||(s||o)&&s!==a)):!0},finishLoad:function(e,r,n,a){n=r?t.strip(n):n,d.isBuild&&(c[e]=n),a(n)},load:function(e,r,n,a){if(a.isBuild&&!a.inlineText)return void n();d.isBuild=a.isBuild;var i=t.parseName(e),c=i.moduleName+"."+i.ext,p=r.toUrl(c),f=d.useXhr||t.useXhr;!o||f(p,s,l,u)?t.get(p,function(r){t.finishLoad(e,i.strip,r,n)},function(e){n.error&&n.error(e)}):r([c],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,n)})},write:function(e,r,n){if(c.hasOwnProperty(r)){var a=t.jsEscape(c[r]);n.asModule(e+"!"+r,"define(function () { return '"+a+"';});\n")}},writeFile:function(e,r,n,a,i){var o=t.parseName(r),s=o.moduleName+"."+o.ext,l=n.toUrl(o.moduleName+"."+o.ext)+".js";t.load(s,n,function(){var r=function(e){return a(l,e)};r.asModule=function(e,t){return a.asModule(e,l,t)},t.write(e,s,r,i)},i)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(r=require.nodeRequire("fs"),t.get=function(e,t){var n=r.readFileSync(e,"utf8");0===n.indexOf("?")&&(n=n.substring(1)),t(n)}):"xhr"===d.env||!d.env&&t.createXhr()?t.get=function(e,r,n){var a=t.createXhr();a.open("GET",e,!0),d.onXhr&&d.onXhr(a,e),a.onreadystatechange=function(){var t,i;4===a.readyState&&(t=a.status,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=a,n(i)):r(a.responseText))},a.send(null)}:("rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var r,n,a="utf-8",i=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),a)),l="";try{for(r=new java.lang.StringBuffer,n=s.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),r.append(n);null!==(n=s.readLine());)r.append(o),r.append(n);l=String(r.toString())}finally{s.close()}t(l)}),t}),define("text!htmlTemplate/navigation/leftnavChatLink.html",[],function(){return'<div id="live-chat">\r\n	<hr>\r\n	<h3>Tips &amp; Tools</h3>\r\n	<ul class="nav-group">\r\n		<li id="liveChatBclMacNav" class="liveChatBclMacNav">Live Chat with a Beauty Stylist</li>\r\n	</ul>\r\n</div>\r\n'}),define("nord/feature/navigation/categoryNav",["jquery","nord/config","nord/feature/util/hoverIntent","nord/feature/util/liveChat","mustache","text!htmlTemplate/navigation/leftnavChatLink.html"],function(e,t,r,n,a,i){function o(){p=e(f),0!==p.length&&(d(),s())}function s(){var e=p.find(h);e.hasClass(g)&&(r.bind(p,{enterDelay:0,delay:1e3,descendantSelector:h,mouseenter:function(e){e.addClass(m).parent("ul").addClass(m),c(),l(e),u(e.parent("ul"),!1)},mouseleave:function(e){e.removeClass(m).parent("ul").removeClass(m),u(e.parent("ul"),!0)}}),e.removeClass(g))}function l(e){var t=e.find(v).length;t>0&&e.find(y).addClass("column-"+t)}function u(e,t){t?(e.next("hr").show(),e.prev("hr").show()):(e.next("hr").hide(),e.prev("hr").hide())}function c(){cmCreatePageElementTag(("department"!==b.toLowerCase()?b+"s "+w:w+"s ")+" Brands","Left Nav Flyout")}function d(){var e=w===P||b===P||S===P;e&&(p.append(a.render(i)),n.init())}var p,f="#category-nav",h=".flyout-link",m="active",g="js-pending-setup",v=".nav-column",y=".subnav-group",w=t.getValueOrDefault("analytics.categoryName","Unknown"),b=t.getValueOrDefault("analytics.parentCategoryName","Department"),S=t.getValueOrDefault("analytics.grandParentCategoryName","Unknown"),P="M&#183;A&#183;C";return{init:o}}),define("nord/feature/recommendation/bloomreach",["jquery","nord/feature/util/keyCode"],function(e,t){function r(r){r=e.extend({},n,r);var a=".br-sf-widget",i=".qvpopup",o=".quickview-close",s=e(i);s.length&&(e("#bloomreach").on("mouseenter.bloomreach",a,function(){var t=e(this),n=t.next();clearTimeout(n.data("timeoutId")),t.data("timeoutId",setTimeout(function(){s.hide(),n.show()},r.mouseenterTimeoutDuration))}).on("mouseleave.bloomreach",a,function(){var t=e(this),n=t.next();clearTimeout(t.data("timeoutId")),n.data("timeoutId",setTimeout(function(){n.hide()},r.mouseleaveTimeoutDuration))}).on("mouseenter.bloomreach",i,function(){var t=e(this),r=t.prev();clearTimeout(r.data("timeoutId")),clearTimeout(t.data("timeoutId"))}).on("mouseleave.bloomreach",i,function(){var t=e(this);t.data("timeoutId",setTimeout(function(){t.hide()},r.mouseleaveTimeoutDuration))}).on("click.bloomreach",o,function(t){t.preventDefault(),e(this).closest(i).hide()}).find(o).removeProp("onclick").attr("href","#"),e(document).on("keyup.bloomreach",function(e){e.keyCode===t.esc&&s.hide()}))}var n={mouseenterTimeoutDuration:250,mouseleaveTimeoutDuration:5e3};return{init:r}}),define("nord/feature/navigation/footerNav",["jquery","nord/config","nord/feature/recommendation/bloomreach"],function(e,t,r){function n(){t.getValue("shopper.environmentInfo.isPos")||r.init()}return{init:n}}),define("nord/feature/form/clearButton",["jquery"],function(e){function t(t,n){var a=e(t),i=e(n);a.on(r,function(){i.toggleClass("hidden",0===a.val().length)}),i.on("click",function(){a.val("").focus(),i.addClass("hidden"),a.trigger(r)}),a.trigger(r)}var r="oninput"in document.createElement("input")?"input":"keyup";return{bind:t}}),define("nord/feature/search/createCompositeModel",["jquery"],function(e){return function(t){var r={},n=function(n){r=e.extend({},r,n),t.eventHub.trigger(i("searchBoxCompositeModelUpdate"),r)},a=function(){n({uiSearchTerm:t.input.DEFAULT,searchTermModel:{},suggestionsModel:{},featuredResultsModel:{}})},i=function(e){return e+"."+t.NAMESPACE};a(),t.eventHub.on(i("searchTermModelUpdate"),function(e){n({uiSearchTerm:e.searchTerm,searchTermModel:e})}).on(i("searchSuggestionsModelUpdate"),function(e){n({suggestionsModel:e})}).on(i("featuredResultsModelUpdate"),function(e){n({featuredResultsModel:e})}).on(i("searchSuggestionNavAction"),function(e){var t=r.suggestionsModel.activeIndex+e,a=r.suggestionsModel.suggestions.length;"number"==typeof e&&t>-1&&a>t&&n({uiSearchTerm:r.suggestionsModel.suggestions[t].term})})}}),define("nord/feature/search/createSearchTermModel",["jquery"],function(e){return function(t){var r={},n=function(n){r=e.extend({},r,n),t.eventHub.trigger(i("searchTermModelUpdate"),r)},a=function(){n({searchTerm:""})},i=function(e){return e+"."+t.NAMESPACE};a(),t.eventHub.on(i("searchTermChangeAction"),function(e){r.searchTerm!==e&&n({searchTerm:e})})}}),define("nord/feature/search/suggestionsService",["nord/config","nord/feature/util/scriptLoader"],function(e,t){var r=e.getValueOrDefault("urls.image","//i.nordstromimage.com/images/"),n="store/suggestions/",a="Nordstrom$SearchBar$LoadSuggestions$",i={},o={},s=0,l=function(e,t){i[e]={suggestions:t.suggestionsFromApi||t.suggestions,prefixes:t.prefixes}},u=function(e){return i[e]},c=function(e,i){var s=/[a-z0-9]/;s.test(e)&&t.load(r+n+e+".js",{context:this}).done(function(){window[a+e](),l(e,o),p(),i()})},d=function(e){o=e},p=function(){o={}},f=function(e){return e.slice(0).sort(function(e,t){return t.count-e.count})},h=function(e,t){return m(e.map(function(e){var r,n,a,i=t[e];if(i){if(r=i.toString().split("|^|"),n=r[0],a=0,!n||0===n.length)return;return r.length>1&&(a=r[1]||0),{term:n,count:a}}}))},m=function(e){return e.filter(function(e){return e.term&&e.term.length>0})},g=function(e){return e in i},v=function(e){return e.trim().toLowerCase()},y=function(e){var t=u(e[0]);return e in t.prefixes?f(h(t.prefixes[e],t.suggestions)):[]},w=function(e,t,r){var n,a=v(e),i=t||10,o=function(){n===s&&r({suggestions:y(a).slice(0,i)})};s+=1,n=s,g(a[0])?o():c(a[0],o)};return window.Nordstrom$SearchBar$LoadSuggestions=d,w}),define("nord/feature/search/createSuggestionsModel",["jquery","nord/feature/search/suggestionsService"],function(e,t){return function(r){var n={},a=function(t){n=e.extend({},n,t),r.eventHub.trigger(o("searchSuggestionsModelUpdate"),n)},i=function(){a({searchTerm:"",suggestions:[],activeIndex:-1})},o=function(e){return e+"."+r.NAMESPACE};i(),r.eventHub.on(o("searchTermChangeAction"),function(o){var s=/[a-zA-Z0-9]/;n.searchTerm!==o&&(s.test(o)?t(o,r.suggestions.MAX_RESULTS,function(t){a(e.extend(t,{searchTerm:o,activeIndex:-1}))}):i())}).on(o("searchSuggestionNavAction"),function(e,t){var r="number"==typeof t?t:n.activeIndex+e,i=n.suggestions.length-1;-1>r?r=i:r>i&&(r=-1),n.activeIndex!==r&&a({activeIndex:r})}).on(o("closeFlyoutAction"),i)}}),define("text!htmlTemplate/search/search-suggestions-template.html",[],function(){return'{{#suggestions}}\r\n	<li id="{{ID}}" class="{{CLASS}}" data-index="{{INDEX}}" data-search-string="{{term}}">{{{htmlTerm}}}{{{htmlCount}}}</li>\r\n{{/suggestions}}\r\n'}),define("nord/feature/search/createSuggestionsView",["jquery","mustache","text!htmlTemplate/search/search-suggestions-template.html"],function(e,t,r){return function(n){var a,i=function(i){var s=e.extend({},i,{debug:n.debug,LIST_ID:n.suggestionsList.ID,suggestions:i.suggestions.map(function(t,r){return e.extend(t,{htmlTerm:t.term.replace(i.searchTerm,"<b>"+i.searchTerm+"</b>"),htmlCount:n.debug?" "+t.count:"",CLASS:n.suggestion.CLASS+(i.activeIndex===r?" "+n.suggestion.SELECTED_CLASS:""),ID:n.suggestion.ID+"-"+r,INDEX:r})})});a.html(t.render(r,s)).menuAim({activate:function(t){n.eventHub.trigger(o("searchSuggestionNavAction"),null,parseInt(e(t).attr("data-index"),10))},submenuDirection:"left",rowSelector:"."+n.suggestion.CLASS})},o=function(e){return e+"."+n.NAMESPACE};e("#"+n.flyout.ID).append('<ul id="'+n.suggestionsList.ID+'" class="'+n.suggestionsList.CLASS+'"></ul>'),a=e("#"+n.suggestionsList.ID),n.eventHub.on(o("searchSuggestionsModelUpdate"),i)}}),define("nord/feature/util/debounce",[],function(){function e(e,t,r){var n;return function(){var a=this,i=arguments;clearTimeout(n),r&&!n&&e.apply(a,i),n=setTimeout(function(){n=null,r||e.apply(a,i)},t)}}return e}),define("nord/feature/search/featuredResultsService",["jquery","nord/config","nord/feature/util/debounce"],function(e,t,r){function n(r,n){var a,i=t.getValueOrDefault("urls.clientApi","//client.api.nordstrom.com"),o="/shopapi/v1/predictivesearch/items",s=4,c=t.getValueOrDefault("shopper.segmentId","-1"),d="USD"!==f?f:"",p=[];u+=1,a=u,e.getJSON(i+o+"?keyword="+r+"&resultcount="+s+"&segmentid="+c+"&currencycode="+d).done(function(e){var t,i;if(a===u){for(t=0,i=e.length;i>t;t++)p.push(l(e[t]));n(r,p)}}).fail(function(e,t,r){var n=t+", "+r;console.log("Featured Results Service Failed: "+n)})}function a(e,t){return e.SaleFlag===m[t]}function i(e,t){return e.GenderCode===h[t]}function o(e,t){return-1!==e.FashionFlags.indexOf(g[t])}function s(e){for(var t=0,r=v.length;r>t;t++)if(v[t].isOn(e))return v[t];return[]}function l(e){var r=s(e);return{style:{number:e.StyleNumber,id:e.StyleId},url:[t.getValueOrDefault("urls.store","http://shop.nordstrom.com/"),"s/",e.PathAlias,"/",e.StyleId].join(""),photo:{host:t.getValueOrDefault("urls.gallery","http://g.nordstromimage.com/imagegallery/store/product/"),path:e.PhotoPath},title:e.Title,colors:{hasMultiple:e.AvailableColorCount>1,count:e.AvailableColorCount},highlight:{hasHighlight:r.hasOwnProperty("text"),cssClass:r.cssClass,text:r.text},price:{isSale:e.IsSale,isAnniversary:a(e,"anniversary"),sale:e.SalePrice,regular:e.RegularPrice,percentOff:e.PercentOff},rating:{hasRating:e.HasRating,rounded:e.RoundedRating,average:e.AverageRating}}}var u=0,c=(t.getValueOrDefault("features.isEarlyAccessEnabled",!1),t.getValueOrDefault("shopper.isEarlyAccessEligible",!1),t.getValueOrDefault("features.isEadOverrideFCEnabled",!1)),d=t.getValueOrDefault("shopper.shipToCountry","US"),p=d&&"US"!==d,f=t.getValueOrDefault("shopper.currencyCode",""),h={male:"M",female:"F",unisex:""},m={none:"None",regular:"Regular",sale:"Sale",anniversary:"Anniversary",beautyExclusive:"BeautyExtras",rack:"Rack",rackExclusive:"RackExclusive",specialPurchase:"SpecialPurchase",other:"Other"},g={none:"None",beauty:"Beauty",giftWithPurchase:"GWP"},v=[{text:"Get it by Christmas Eve",cssClass:"holiday",isOn:function(e){return e.IsFcAvailable&&c&&!p}},{text:"Anniversary Sale",cssClass:"Anniversary",isOn:function(e){return a(e,"anniversary")}},{text:"Grooming Exclusive",cssClass:"beauty-men-exclusive",isOn:function(e){return a(e,"beautyExclusive")&&i(e,"male")}},{text:"Beauty Exclusive",cssClass:"beauty-women-exclusive",isOn:function(e){return a(e,"beautyExclusive")&&i(e,"female")}},{text:"Beauty Exclusive",cssClass:"beauty-unisex-exclusive",isOn:function(e){return a(e,"beautyExclusive")&&i(e,"unisex")}},{text:"Price Matched",cssClass:"NeverPayMore",isOn:function(e){return a(e,"rack")}},{text:"Free Shipping",cssClass:"free-shipping",isOn:function(){return!1}},{text:"New Markdown",cssClass:"new-markdown",isOn:function(e){return e.IsNew&&e.IsMarkdown}},{text:"New!",cssClass:"new",isOn:function(e){return e.IsNew&&!e.IsMarkdown}},{text:"Gift With Purchase",cssClass:"GWP",isOn:function(e){return o(e,"giftWithPurchase")}}];return r(n,200)}),define("nord/feature/search/createFeaturedResultsModel",["jquery","nord/feature/search/featuredResultsService"],function(e,t){return function(r){var n={},a=function(t){n=e.extend({},n,t),r.eventHub.trigger(o("featuredResultsModelUpdate"),n)},i=function(){a({searchTerm:"",products:[],activeIndex:-1,isLoading:!1})},o=function(e){return e+"."+r.NAMESPACE};i(),r.eventHub.on(o("searchSuggestionFocusAction"),function(e){n.searchTerm!==e&&(a({searchTerm:e,products:[],activeIndex:-1,isLoading:!0}),t(e,function(e,t){a({products:t,isLoading:!1})}))}).on(o("featuredResultNavAction"),function(e,t){var r="number"==typeof t?t:n.activeIndex+e,i=n.products.length-1;-1>r?r=i:r>i&&(r=-1),n.activeIndex!==r&&a({activeIndex:r})}).on(o("closeFlyoutAction"),i)}}),define("text!htmlTemplate/search/featured-results-template.html",[],function(){return'<section id="{{PRODUCT_SECTION_ID}}" class="search-featured-results" aria-live="polite" aria-atomic="true">\r\n\r\n	<h2 class="results-heading">Featured Results for &ldquo;{{searchTerm}}&rdquo;</h2>\r\n\r\n	<ul class="results-product-shelf {{LOADING_CLASS}}">\r\n\r\n		{{#products}}\r\n			<li id="featured-product-{{style.id}}" class="product-item product-item-thumbnail" data-style-id="{{style.id}}" data-style-number="{{style.number}}">\r\n				<a href="{{url}}?origin=PredictiveSearchProducts" class="product-photo-href" tabindex="-1">\r\n					<span class="ada-hidden">{{{title}}}</span>\r\n					<img class="product-photo" data-original="{{photo.host}}thumbnail{{photo.path}}" src="{{photo.host}}thumbnail{{photo.path}}" width="75" height="115" alt="{{{title}}}">\r\n				</a>\r\n				<div class="product-details">\r\n					{{#colors.hasMultiple}}\r\n						<div class="product-swatches"><a href="{{url}}" class="color-count">{{colors.count}} COLORS</a></div>\r\n					{{/colors.hasMultiple}}\r\n					{{#highlight.hasHighlight}}\r\n						<span class="highlight {{highlight.cssClass}}">{{highlight.text}}</span>\r\n					{{/highlight.hasHighlight}}\r\n					<a class="product-href" href="{{url}}?origin=PredictiveSearchProducts">{{{title}}}</a>\r\n					<div class="product-price {{#price.isAnniversary}}anniversary{{/price.isAnniversary}}" itemprop="offers" itemscope="" itemtype="http://schema.org/Offer">\r\n						{{#price.isSale}}\r\n							{{#price.regular}}<span class="regular">{{price.regular}}</span>{{/price.regular}}\r\n							{{#price.sale}}<span class="sale" itemprop="price">{{price.sale}}</span>{{/price.sale}}\r\n							{{#price.percentOff}}<span class="percentoff">{{price.percentOff}}</span>{{/price.percentOff}}\r\n						{{/price.isSale}}\r\n						{{^price.isSale}}\r\n							{{#price.regular}}<span class="regular">{{price.regular}}</span>{{/price.regular}}\r\n						{{/price.isSale}}\r\n					</div>\r\n					{{#rating.hasRating}}\r\n						<a href="{{url}}?origin=PredictiveSearchProducts#reviewTabs" class="product-rating stars-{{rating.rounded}}">\r\n							<span class="ada-hidden">Rating {{rating.rounded}} out of 5 stars</span>\r\n						</a>\r\n					{{/rating.hasRating}}\r\n				</div>\r\n			</li>\r\n		{{/products}}\r\n\r\n		{{^products}}\r\n			<li>\r\n				<a href="{{shopUrl}}sr?keyword={{URL_SEARCH_TERM}}&origin=PredictiveSearchProducts" class="results-no-results">{{searchTerm}}</a>\r\n			</li>\r\n		{{/products}}\r\n	</ul>\r\n</section>\r\n'}),define("nord/feature/search/createFeaturedResultsView",["jquery","mustache","text!htmlTemplate/search/featured-results-template.html"],function(e,t,r){return function(n){var a=e("#"+n.flyout.ID),i=function(i){if("undefined"!=typeof i){var o=e.extend({},i,{URL_SEARCH_TERM:i.searchTerm.replace(/\s/g,"+"),LOADING_CLASS:i.isLoading?n.productsSection.LOADING_CLASS:"",PRODUCT_SECTION_ID:n.productsSection.ID,PRODUCT_ID:n.product.ID,products:i.products.map(function(e,t){return e.SELECTED_CLASS=i.activeIndex===t?n.product.SELECTED_CLASS:"",e})});a.find("#"+n.productsSection.ID).replaceWith(t.render(r,o))}},o=function(e){return e+"."+n.NAMESPACE};a.addClass(n.flyout.ENABLED_CLASS).prepend('<section id="'+n.productsSection.ID+'"></section>'),n.eventHub.on(o("featuredResultsModelUpdate"),i)}}),define("nord/core/EventEmitter",[],function(){function e(){this._topics={}}function t(e,t,r,n){t=t.split(" ");for(var a;a=t.pop();)a=a.split("."),r(e,a.shift(),a,n);return e}function r(e,t){if(e.length>t.length)return!1;var r,n;for(n=0;r=e[n];n++)if(-1===t.indexOf(r))return!1;return!0}function n(e,t,n){var a,i,o=e._topics[t];if(n.length)for(i=0;a=o[i];i++)r(n,a.filters)&&o.splice(i--,1);else o.length=0}function a(e,t,r,n){var a=e._topics;(a[t]=a[t]||[]).push({filters:r,fn:n})}function i(e,t,r,n){a(e,t,r,function(){e.off([t].concat(r).join(".")),n.apply(e,arguments)})}function o(e,t,r,n){var a,i,o;if(a=e._topics[t])for(o=0;i=a[o];o++)i.fn.apply(e,n)}return e.prototype={on:function(e,r){return t(this,e,a,r)},one:function(e,r){return t(this,e,i,r)},off:function(e){return t(this,e,n)},trigger:function(e){return t(this,e,o,Array.prototype.slice.call(arguments,1))}},e}),define("nord/feature/search/SearchBox",["jquery","nord/config","nord/feature/form/clearButton","nord/feature/search/createCompositeModel","nord/feature/search/createSearchTermModel","nord/feature/search/createSuggestionsModel","nord/feature/search/createSuggestionsView","nord/feature/search/createFeaturedResultsModel","nord/feature/search/createFeaturedResultsView","nord/feature/util/keyCode","nord/feature/util/querystring","nord/core/EventEmitter"],function(e,t,r,n,a,i,o,s,l,u,c,d){var p=c.deserialize(document.location.search).keyword,f={form:{ID:"primary-search-form"},input:{ID:"primary-search-input",DEFAULT:p?p.replace(/\+/g," "):""},submit:{ID:"primary-search-submit"},reset:{ID:"primary-search-reset"},categoryId:{ID:"primary-search-category-id",DEFAULT:t.getValueOrDefault("analytics.pageCategoryId",0)},origin:{ID:"primary-search-origin"},flyout:{ID:"primary-search-flyout",ENABLED_CLASS:"featured-results-is-enabled",SELECTED_CLASS:"product-is-selected",ACTIVE_CLASS:"active"},suggestionsList:{ID:"primary-search-suggestions",CLASS:"search-suggestions"},suggestion:{ID:"primary-search-suggestion",CLASS:"search-suggestion",SELECTED_CLASS:"highlight"},productsSection:{ID:"primary-search-featured-results",CLASS:"search-featured-results",LOADING_CLASS:"loading"},product:{ID:"primary-search-featured-product",CLASS:"product-item",SELECTED_CLASS:"selected",HREF_CLASS:"product-href"},suggestions:{enabled:t.getValueOrDefault("features.isSearchSuggestionsEnabled",!1),MAX_RESULTS:10},featuredResults:{enabled:t.getValueOrDefault("features.isFeaturedResultsEnabled",!1),MAX_RESULTS:4},debug:"1"===c.deserialize(document.location.search).debPs,SHOP_URL:t.getValueOrDefault("urls.store","//shop.nordstrom.com/"),NAMESPACE:"primarySearchBox"},h="oninput"in document.createElement("input")?"input":"keyup",m=function(e){e.preventDefault(),window.alert("Please specify a search term.")},g=function(e,t){var r=t.prop("action"),n=-1===r.indexOf("?")?"?":"&";e.preventDefault(),window.location=r+n+t.serialize()},v=function(e,t){return function(r){var n=/[a-zA-Z0-9]/;return n.test(e.val())?"https:"===window.location.protocol?(g(r,t),!1):void 0:(m(r),!1)}};return function(t){var c=e.extend(!0,{},f,t,{eventHub:new d}),p=e("#"+c.form.ID),m=e("#"+c.input.ID),g=e("#"+c.submit.ID),y=e("#"+c.reset.ID),w=e("#"+c.categoryId.ID),b=e("#"+c.flyout.ID),S=(e("body"),function(e){return e+"."+c.NAMESPACE}),P=function(e){m.val(e)},C=!1;P(c.input.DEFAULT),w.val(c.categoryId.DEFAULT),r.bind(m,y),m.attr("aria-owns",b.attr("id")),c.eventHub.on("searchBoxCompositeModelUpdate",function(t){var r=t.suggestionsModel.suggestions,n=t.featuredResultsModel.activeIndex,a=t.suggestionsModel.activeIndex,i=e("#"+c.productsSection.ID).find("."+c.product.CLASS).eq(n).prop("id"),o=e("#"+c.suggestionsList.ID).find("."+c.suggestion.CLASS).eq(a).prop("id"),s=r&&r.length>0;C="number"==typeof n&&n>-1,s&&c.eventHub.trigger(S("searchSuggestionFocusAction"),r[a>-1?a:0].term),m.attr("aria-activedecendant",C?i:a>-1?o:c.input.ID),a>-1&&P(t.uiSearchTerm),b.toggleClass(c.flyout.SELECTED_CLASS,C).toggleClass(c.flyout.ACTIVE_CLASS,s)
}),p.on(S("submit"),v(m,p)),g.on(S("click"),v(m,p)),m.on(S(h),function(){c.eventHub.trigger(S("searchTermChangeAction"),m.val())}).on(S("blur"),function(){setTimeout(function(){0===e(document.activeElement).closest("#"+c.flyout.ID).length?c.eventHub.trigger(S("closeFlyoutAction")):m.focus()},50)}).on(S("keydown"),function(t){switch(t.which){case u.esc:c.eventHub.trigger(S("closeFlyoutAction"));break;case u.up:case u.down:c.eventHub.trigger(S("searchSuggestionNavAction"),t.which===u.up?-1:1);break;case u.left:case u.right:c.eventHub.trigger(S("featuredResultNavAction"),t.which===u.left?-1:1);break;case u.enter:C&&(t.preventDefault(),e("#"+c.productsSection.ID).find("."+c.product.SELECTED_CLASS).find("."+c.product.HREF_CLASS).get(0).click())}}),b.on(S("click"),"."+c.suggestion.CLASS,function(t){t.stopPropagation(),P(e(t.target).closest("."+c.suggestion.CLASS).data("search-string")),p.trigger(S("submit"))}),a(c),n(c),c.suggestions.enabled&&(i(c),o(c)),c.featuredResults.enabled&&(s(c),l(c))}}),define("nord/feature/util/cookie",["nord/config","nord/feature/util/querystring"],function(e,t){function r(e,t,r){var n="",a="",i="",o="";return"undefined"==typeof e||"undefined"==typeof t?void("warn"in window.console&&window.console.warn("Cookie: Unable to set cookie when no name or value is passed.")):("object"==typeof r&&("expires"in r&&(n="; expires="+r.expires.toUTCString()),"path"in r&&(a="; path="+r.path),"domain"in r&&(i="; domain="+r.domain),"secure"in r&&(o="; secure")),"object"==typeof JSON&&"object"==typeof t&&(t=encodeURIComponent(JSON.stringify(t))),void(document.cookie=[e,"=",t,n,a,i,o].join("")))}function n(e,r){var n;return new RegExp("(?:; )?"+(e||"__foo__")+"=([^;]*);?").test("; "+document.cookie)?(n=decodeURIComponent(RegExp.$1),r===!0?"object"==typeof JSON&&n.match(/^(\{(.*)\})|(\[(.*)\])$/)?JSON.parse(n):t.deserialize(n):n):void 0}function a(e,t){var r,a=n(e,!0),i=typeof a;return"object"===i&&a.constructor!==Array&&(r=a[t],"undefined"==typeof r&&(r=a[t.toUpperCase()],"undefined"==typeof r&&(r=a[t.toLowerCase()]))),r}function i(a,i,o,s){var l,u=n(a,s)||"",c=typeof u,d=new Date;d.setTime(d.getTime()+31536e7),l={domain:e.getValueOrDefault("cookies.domain",document.domain),expires:d,path:"/"},"object"===c&&u.constructor!==Array?(u[i]=o,u=t.serialize(u,"")):u=t.updateParameter(u,i,o,""),r(a,u,l)}function o(t){var n={domain:e.getValueOrDefault("cookies.domain",document.domain),expires:new Date(0),path:"/"};r(t,"",n)}return{save:r,load:n,getValue:a,setValue:i,destroy:o}}),define("text!htmlTemplate/minibag/items.html",[],function(){return'{{#Items}}\r\n<li class="mini-bag-item" data-value="{{JsonValue}}" data-item-params="{{MiniBagParams}}">\r\n	<div class="item-image">\r\n		<a href="{{Url}}" title="{{StyleName}}">\r\n			<img src="{{Src}}" alt="{{Alt}}"/>\r\n		</a>\r\n	</div>\r\n	<div class="item-content">\r\n		<div class="item-info">\r\n			<h2 class="item-name">\r\n				<a href="{{Url}}" title="{{StyleName}}">{{StyleName}}</a>\r\n			</h2>\r\n			{{#Size}}\r\n			<div class="clearfix">\r\n				<span class="item-properties">{{Name}}:</span>\r\n				<span class="item-properties-values item-size">{{Value}}</span>\r\n			</div>\r\n			{{/Size}}\r\n			{{#Color}}\r\n			<div class="clearfix">\r\n				<span class="item-properties">{{Name}}:</span>\r\n				<span class="item-properties-values item-color">{{Value}}</span>\r\n			</div>\r\n			{{/Color}}\r\n			{{#Value}}\r\n			<div class="clearfix">\r\n				<span class="item-properties">{{Name}}:</span>\r\n				<span class="item-properties-values item-value">{{Value}}</span>\r\n			</div>\r\n			{{/Value}}\r\n			{{#Design}}\r\n			<div class="clearfix">\r\n				<span class="item-properties">{{Name}}:</span>\r\n				<span class="item-properties-values item-design">{{Value}}</span>\r\n			</div>\r\n			{{/Design}}\r\n			<div class="clearfix">\r\n				<span class="item-properties">Qty:</span>\r\n				<span class="item-properties-values item-quantity">{{Quantity}}</span>\r\n			</div>\r\n			{{#BackOrder}}\r\n			<div class="clearfix special-message">\r\n				<span class="item-properties ">Backordered item:</span>\r\n				<span class="item-properties-values item-backorder">Approximate ship date of {{Value}}.</span>\r\n			</div>\r\n			{{/BackOrder}}\r\n			{{#PreOrder}}\r\n			<div class="clearfix special-message">\r\n				<span class="item-properties ">Pre-ordered item:</span>\r\n				<span class="item-properties-values item-preorder">This item has an approximate ship date of {{Value}}.</span>\r\n			</div>\r\n			{{/PreOrder}}\r\n			{{#BOPUS}}\r\n			<div class="clearfix special-message">\r\n				<span class="item-properties">Picking up in store:</span>\r\n				<span class="item-properties-values item-storename">{{Value}}</span>\r\n			</div>\r\n			{{/BOPUS}}\r\n			{{#UnAvailable}}\r\n			<div class="clearfix unavailable special-message">Your selection is no longer available.</div>\r\n			{{/UnAvailable}}\r\n			<input class="item-remove clearfix button button-standard" type="button" value="Remove"/>\r\n		</div>\r\n		<div class="item-price">{{Price}}</div>\r\n	</div>\r\n	<div class="item-separator"></div>\r\n</li>\r\n{{/Items}}\r\n'}),define("text!htmlTemplate/minibag/empty.html",[],function(){return'<li class="mini-bag-item empty-item">\r\n	<div class="empty-item">There are currently no items in your Shopping Bag.</div>\r\n</li>'}),define("text!htmlTemplate/minibag/subtotal.html",[],function(){return'<div class="shipping-subtotal">\r\n	{{^isInternationalShopper}}\r\n		<div class="shipping-promo">\r\n			<img src="{{ImageUrl}}default/shop/image/common/2012/0615/mini-bag-free-shipping-promo.gif" alt="Free Shipping Promo"/>\r\n		</div>\r\n	{{/isInternationalShopper}}\r\n	<div class="subtotal">\r\n		Subtotal: <b>{{SubTotal}}</b>\r\n	</div>\r\n</div>\r\n<div class="edit-checkout">\r\n	<a id="mini-bag-shopping-bag" class="button button-standard button-small" href="{{ShoppingBagUri}}" title="Shopping Bag" name="Shopping Bag">Shopping Bag</a>\r\n	<a id="mini-bag-checkout" class="button button-primary button-small" href="{{CheckoutUri}}" title="Checkout" name="Checkout">Checkout</a>\r\n</div>\r\n'}),define("nord/feature/minibag/minibag",["jquery","mustache","modernizr","nord/config","nord/feature/util/cookie","nord/feature/util/keyCode","text!htmlTemplate/minibag/items.html","text!htmlTemplate/minibag/empty.html","text!htmlTemplate/minibag/subtotal.html"],function(e,t,r,n,a,i,o,s,l){function u(){n.getValueOrDefault("features.isMiniBagEnabled",!0)&&(D=e("#mini-bag-section"),1===D.length&&(A=e("#shopping-bag-count"),I=e("#shopping-bag-link"),x=e("#mini-bag-close"),n.getValueOrDefault("features.isEasyCheckoutEnabled",!0)===!0&&e("#shopping-bag-links").addClass("easy-checkout"),c(),v(),f()))}function c(){D.on("click",k.itemRemove,function(){b(e(this).closest(k.item))}).on("click",k.checkout,function(t){e(this).hasClass("button-disabled")&&t.preventDefault()}).add(I).on("mouseover",d).on("mouseleave",p),x.on("click",function(e){e.preventDefault(),p()}),I.on("mouseover",function(){E&&cmCreateElementTag("Shopping Bag Expand Hover - Mini","Shopping Bag")}),r.touch&&I.on("click",function(e){I.hasClass("active")||(e.preventDefault(),e.stopPropagation(),I.addClass("active"),d())}),e(document).on("update.miniBag",function(t,r){t.stopPropagation(),t.preventDefault(),h(r),d(),e("html, body").animate({scrollTop:0},0),x.focus()})}function d(){I.trigger("focus").parent().addClass("active"),e(window).on("keydown.miniBag",function(e){e.which===i.esc&&p()})}function p(){I.removeClass("active").parent().removeClass("active"),e(window).off("keydown.miniBag"),g(S())}function f(){e.ajax({type:"GET",url:n.getValue("urls.store")+"mb/Get",dataType:"json",data:P()}).done(function(e){e.error?console.log("Minibag: An error occurred while getting Minibag data: "+e.error.Value):(null!==e.Items?(h(e),g(e.ShoppingBagCount)):y(),w(e.ShoppingBagCount))})}function h(r){r.isInternationalShopper=O,n.getValueOrDefault("features.isEasyCheckoutEnabled",!0)===!1&&r.ShoppingBagUri&&(r.CheckoutUri=r.ShoppingBagUri),D.find("ul").empty().append(t.render(o,r)).end().find(k.subtotalSection).empty().append(t.render(l,r)).end().find(k.checkout).on("click",function(){E&&cmCreateManualLinkClickTag(e(this).attr("href"),"Checkout")}),m(r,!0),v()}function m(e,t){if(e.hasOwnProperty("QtyAffected")&&!isNaN(parseInt(e.QtyAffected,10))){var r=t?"Added":"Removed";D.find(k.itemMessage).html(e.QtyAffected+" "+T[(1!==e.QtyAffected?"items":"item")+r])}}function g(e){D.find(k.emptyItem).length>0||D.find(k.itemMessage).html(e+" "+T[(1!==e?"items":"item")+"InBag"])}function v(){var e=D.find(k.item);e.filter(":last").addClass("last-item"),D.find(k.scrollContainer).toggleClass("three-items",e.length>2)}function y(){D.find(k.subtotalSection).empty().end().find("ul").empty().append(s).end().find(k.itemMessage).empty()}function w(t){A.html(t),a.setValue(n.getValueOrDefault("cookies.nordstrom","nordstrom"),"bagcount",t),isNaN(t)||1>t?e("#mini-bag-checkout").addClass("button-disabled"):e("#mini-bag-checkout").removeClass("button-disabled")}function b(t){e.ajax({type:"POST",url:n.getValue("urls.store")+"mb/Remove",dataType:"json",data:t.data("value")}).done(function(e){e.error?(console.log("Minibag: An error occurred while removing an item from the Minibag: "+e.error.Value),"Unable to Remove item from MiniBag"===e.error.Value&&f()):(t.remove(),w(e.ShoppingBagCount),null!==e.Items?(m(e,!1),D.find(k.subtotal).html(e.SubTotal)):y(),v(),E&&cmCreateElementTag("Remove Item - Mini","Shopping Bag"))})}function S(){var e=parseInt(a.getValue(n.getValueOrDefault("cookies.nordstrom","nordstrom"),"bagcount"),10);return isNaN(e)?0:e}function P(){var e=a.load("minibag");return"undefined"!=typeof e&&e.hasOwnProperty("MiniBagHash")?e.MiniBagHash:(new Date).getTime().toString()}function C(t){var r=D.find(k.item).not(k.emptyItem);E&&(r.each(function(){var t,r=e(this).data("itemParams"),n="";r&&(r.OutfitId&&""!==r.OutfitId&&(n=r.StyleId+"_"+r.OutfitId),t=r.SiteLocationId.substr(r.SiteLocationId.indexOf("*")).split("*").join("-_-"),cmCreateShopAction5Tag(r.StyleId,r.StyleName,r.Quantity,r.UnitPrice,r.CategoryId,n,"","",r.PickUpInStore,r.StoreNumber,"",t),cmDisplayShop5s())}),r.length>0&&cmCreateConversionEventTag(t,"2","Checkout Button"))}var A,I,D,x,T={itemAdded:"item has been added to your Shopping Bag",itemsAdded:"items have been added to your Shopping Bag",itemRemoved:"item has been removed from your Shopping Bag",itemsRemoved:"items have been removed from your Shopping Bag",itemInBag:"item in Shopping Bag",itemsInBag:"items in Shopping Bag"},k={checkout:"#mini-bag-checkout",emptyItem:".empty-item",item:".mini-bag-item",itemMessage:".item-message",itemRemove:".item-remove",scrollContainer:".mini-bag-section-content-scroll",subtotal:".subtotal b",subtotalSection:".mini-bag-section-content-bottom"},E=!!window.cmCreateElementTag,R=a.getValue("internationalshippref","preferredcountry"),O="US"!==R;return{init:u,open:d,close:p,throwShopAction5Tags:C}}),define("nord/featureSet/minibag",["nord/feature/minibag/minibag"],function(e){return e}),define("thirdParty/plugin/jquery.lazyload.min",["jquery"],function(e){return function(e,t,r,n){var a=e(t);e.fn.lazyload=function(i){function o(){var t=0;l.each(function(){var r=e(this);if(!u.skip_invisible||r.is(":visible"))if(e.abovethetop(this,u)||e.leftofbegin(this,u));else if(e.belowthefold(this,u)||e.rightoffold(this,u)){if(++t>u.failure_limit)return!1}else r.trigger("appear"),t=0})}var s,l=this,u={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return i&&(n!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),n!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(u,i)),s=u.container===n||u.container===t?a:e(u.container),0===u.event.indexOf("scroll")&&s.bind(u.event,function(){return o()}),this.each(function(){var t=this,r=e(t);t.loaded=!1,(r.attr("src")===n||r.attr("src")===!1)&&r.is("img")&&r.attr("src",u.placeholder),r.one("appear",function(){if(!this.loaded){if(u.appear){var n=l.length;u.appear.call(t,n,u)}e("<img />").bind("load",function(){var n=r.attr("data-"+u.data_attribute);r.hide(),r.is("img")?r.attr("src",n):r.css("background-image","url('+n+')"),r[u.effect](u.effect_speed),t.loaded=!0;var a=e.grep(l,function(e){return!e.loaded});if(l=e(a),u.load){var i=l.length;u.load.call(t,i,u)}}).attr("src",r.attr("data-"+u.data_attribute))}}),0!==u.event.indexOf("scroll")&&r.bind(u.event,function(){t.loaded||r.trigger("appear")})}),a.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&l.each(function(){e(this).trigger("appear")})}),e(r).ready(function(){o()}),this},e.belowthefold=function(r,i){var o;return o=i.container===n||i.container===t?(t.innerHeight?t.innerHeight:a.height())+a.scrollTop():e(i.container).offset().top+e(i.container).height(),o<=e(r).offset().top-i.threshold},e.rightoffold=function(r,i){var o;return o=i.container===n||i.container===t?a.width()+a.scrollLeft():e(i.container).offset().left+e(i.container).width(),o<=e(r).offset().left-i.threshold},e.abovethetop=function(r,i){var o;return o=i.container===n||i.container===t?a.scrollTop():e(i.container).offset().top,o>=e(r).offset().top+i.threshold+e(r).height()},e.leftofbegin=function(r,i){var o;return o=i.container===n||i.container===t?a.scrollLeft():e(i.container).offset().left,o>=e(r).offset().left+i.threshold+e(r).width()},e.inviewport=function(t,r){return!(e.rightoffold(t,r)||e.leftofbegin(t,r)||e.belowthefold(t,r)||e.abovethetop(t,r))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(e,window,document),e.fn.lazyload}),define("nord/feature/util/lazyLoad",["jquery","lazyload"],function(e){function t(){var t=e(".image-lazy");t.length&&(e(document).on("recalculate-lazyload",function(){e(window).trigger("scroll")}),t.lazyload({failure_limit:5,threshold:100,effect:"fadeIn",load:function(){e(this).removeClass("image-lazy-spinner")}}))}t()}),define("text!htmlTemplate/dialog/modalFramework.html",[],function(){return'<aside id="modal-container" class="modal" role="dialog" aria-describedby="modal-article">\r\n	<div class="modal-content-wrapper">\r\n		<div id="modal-content" class="modal-content">\r\n			<button class="sprite sprite-close-lg ir modal-close" title="close">close</button>\r\n			<article class="modal-article"></article>\r\n		</div>\r\n	</div>\r\n</aside>\r\n'}),define("nord/feature/util/hub",[],function(){function e(e){this.topics={},e&&e.attach&&"object"==typeof e.attach&&this.attach(e.attach)}return e.prototype={publish:function(e,t){var r,n,a;if(this.topics[e])for(r=this.topics[e],n=t||[],a=r.length-1;a>=0;a--)r[a].apply(this,n)},subscribe:function(e,t){return this.topics[e]||(this.topics[e]=[]),"function"==typeof t&&this.topics[e].push(t),{topic:e,callback:t}},unsubscribe:function(e){var t,r,n=e.topic;if(this.topics[n])for(t=this.topics[n],r=t.length-1;r>=0;r--)t[r]===e.callback&&t.splice(r,1)},attach:function(e){var t=this;e.on=function(){return t.subscribe.apply(t,arguments)},e.off=function(){return t.unsubscribe.apply(t,arguments)},e.trigger=function(){return t.publish.apply(t,arguments)}}},e}),define("nord/feature/navigation/popup",["jquery"],function(e){var t=/\W+/g,r={center:0,height:650,left:50,menubar:0,name:"_popup",personalbar:0,refocus:0,resizable:1,scrollbars:1,status:0,toolbar:0,top:50,width:650};return function(n,a){var i,o;if(!n)throw new Error("Module nord/feature/navigation/popup requires a url. The window was not created.");return a=e.extend({},r,a),a.center&&(a.left=Math.round((screen.width-a.width)/2),screen.height>a.height&&(a.top=Math.round((screen.height-a.height)/2))),o="height="+a.height+",left="+a.left+",menubar="+a.menubar+",personalbar="+a.personalbar+",resizable="+a.resizable+",scrollbars="+a.scrollbars+",status="+a.status+",toolbar="+a.toolbar+",top="+a.top+",width="+a.width,i=window.open(n,a.name.replace(t,""),o),i?a.refocus&&i.focus():window.location=n,i}}),define("nord/feature/navigation/popupLink",["jquery","nord/feature/navigation/popup"],function(e,t){function r(e){e.on("click.popup",".js-popup-link",n)}function n(r){r.preventDefault();var n=e(r.currentTarget),a=n.data("popupHeight")||0,i=n.data("popupWidth")||0,o=n.attr("title"),s={};a>0&&(s.height=a),i>0&&(s.width=i),o&&(s.name=o),t(n.attr("href"),s)}return{init:function(t){t=e(t?t:"body"),r(t)}}}),define("nord/feature/dialog/popover",["jquery"],function(e){function t(t){var a=".popover";t.on("click.popover",".js-popover-link",function(t){t.preventDefault(),t.stopPropagation();var r=e(this),a={};n(r,a)}).on("click.popoverclose",function(t){e(t.target).closest(a).length||r(e(a))}),e(".sprite-popover-close, .popover-close").on("click.popoverclose",function(t){t.preventDefault(),t.stopPropagation(),r(e(this).closest(a))})}function r(e){e.removeClass("active").css("left",""),clearTimeout(i)}function n(t,r){if(t.constructor!==e&&(t=e(t)),!t.data("popoverId"))throw new Error("Popover link triggers must have a target");var n=e("#"+t.data("popoverId"));if(0===n.length)throw new Error("Popover target does not exist: #"+t.data("popoverId"));var o={};r=e.extend({},o,r),n.addClass("active"),n.hasClass("tooltip")&&(i=a(n)),n.triggerHandler("popover.opened")}function a(e){return setTimeout(function(){e.removeClass("active").css("left","")},o)}var i,o=3e3;return{init:function(r,n){o=n>0?n:o,r=r?r:e("body"),t(r)},close:r}}),define("nord/feature/util/contentBootstrap",["jquery","nord/feature/navigation/popupLink","nord/feature/dialog/popover"],function(e,t,r){function n(e){e.find(".nord-vid").length&&require(["nord/featureSet/internalFlashVideo"],function(t){t.init(e)})}function a(t){var r=e(".link-target-modal, .link-target-video-modal",t);r.length&&require(["nord/feature/dialog/modal"],function(t){r.each(function(){var r=e(this),n=r.prop("href"),a=r.data("modalBackground"),i=n.indexOf("?")>-1?"&":"?",o=t.create(n+i+"onlycontent=true",{theme:a?a:"light"});r.on("click.show-modal",function(e){o.show(),e.preventDefault()})})})}return{init:function(i){var o=e(i?i:"body");t.init(o),r.init(o),a(o),n(o)}}}),define("nord/feature/dialog/modal",["jquery","mustache","nord/config","text!htmlTemplate/dialog/modalFramework.html","nord/feature/util/hub","nord/feature/util/contentBootstrap"],function(e,t,r,n,a,i){function o(){d=e(n),d.on("click.modal",function(){P&&S&&e(this).hasClass("modal-overlay")&&P.hide()}),p=d.find(".modal-content"),p.on("click.modal",function(e){e.stopPropagation()}),p.on("click.modal",".modal-close",function(e){P&&P.hide(),e.preventDefault()}),p.delegate(".modal-cancel","click.modal",function(e){P&&P.hide(),e.preventDefault()}),h=p.find(".modal-close"),f=d.find(".modal-article"),d.appendTo("body"),e(document).on("keyup.modal",function(e){27===e.keyCode&&S&&P&&P.hide()}),e(window).on("resize.modal",function(){P&&P.settings.centered&&s()})}function s(){if(S){p.css({left:0,top:0});var e=w.browserWidth(),t=w.browserHeight(),r={left:(e-p.outerWidth(!0))/2,top:(t-p.outerHeight(!0))/2};r.left=r.left<0?0:r.left,r.top=r.top<0?0:r.top,p.css(r)}}function l(e){var t={top:e.settings.top||"",left:e.settings.left||"",marginLeft:e.settings.offsetX||"",marginTop:e.settings.offsetY||"",minHeight:e.settings.minHeight||"",maxHeight:e.settings.maxHeight||"",minWidth:e.settings.minWidth||"",maxWidth:e.settings.maxWidth||""};e.settings.centered&&(t.top="",t.left=""),d.toggleClass("modal-overlay",e.settings.overlay),p.toggleClass("modal-theme-black","black"===e.settings.theme).toggleClass("modal-theme-light","light"===e.settings.theme||"white"===e.settings.theme).toggleClass("modal-theme-video","video"===e.settings.theme).toggleClass("modal-theme-standard","standard"===e.settings.theme).css(t),e.settings.cssClass&&p.addClass(e.settings.cssClass),e.settings.paddingInContent&&p.css("padding","0"),"standard"===e.settings.theme?h.removeClass("sprite-close-lg").addClass("sprite-close-sm"):h.removeClass("sprite-close-sm").addClass("sprite-close-lg"),f.empty().append(e.content)}function u(t,r){var n=i;e.get(r).done(function(r){t.content=e(r),n.init(t.content)}).fail(function(){t.content="Unable to load the page"}).always(function(){P===t&&S&&(P=null,t.show())})}function c(e,t){d||o();var r=Object.create(C);return r.init(e,t),r}var d,p,f,h,m="beforeshow",g="show",v="beforeclose",y="close",w=r.getValue("shopper.clientInfo"),b={delayAjaxContentLoading:!0,theme:"video",overlay:!0,centered:!0,top:0,left:0,offsetX:!1,offsetY:!1,minHeight:!1,maxHeight:!1,minWidth:!1,maxWidth:!1},S=!1,P=!1,C={init:function(t,r){var n,i=(new a({attach:this}),typeof t),o=this;if(this.content="",this.settings=e.extend({},b,r||{}),"string"!==i||0!==t.indexOf("http://")&&0!==t.indexOf("https://"))if("string"===i)this.content=t;else{if("object"!==i||null===t||!t.nodeType&&t.constructor!==e)throw new Error("Invalid content for modal");this.content=t}else this.content="Loading...",o.settings.delayAjaxContentLoading?n=o.on(m,function(){u(o,t),o.off(n)}):u(o,t)},setMinHeight:function(e){this.settings.minHeight=e,p.css({minHeight:e})},show:function(){S&&P===this||(P!==this&&(P&&(P.trigger(v),P.trigger(y)),l(this)),P=this,this.trigger(m),d.show(),S=!0,d.attr("aria-hidden","false"),this.settings.centered&&s(),e("body").addClass("no-scroll"),h.focus(),this.trigger(g))},hide:function(){var t=this;S&&P===this&&(this.trigger(v),f.find('iframe[src*="//www.youtube.com/"]').each(function(){var e,r;e=this,r=this.src,this.src="",t.on(m,function(){e.src=r})}),d.hide(),S=!1,d.attr("aria-hidden","true"),e("body").removeClass("no-scroll"),this.trigger(y),d.trigger("modal.close"))}};return{create:c}}),define("nord/feature/util/jquery.menuAim",["jquery"],function(e){function t(t){var r=e(this),n=null,a=[],i=null,o=null,s=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=3,u=300,c=function(e){a.push({x:e.pageX,y:e.pageY}),a.length>l&&a.shift()},d=function(){o&&clearTimeout(o),s.exitMenu(this)&&(n&&s.deactivate(n),n=null)},p=function(){o&&clearTimeout(o),s.enter(this),g(this)},f=function(){s.exit(this)},h=function(){m(this)},m=function(e){e!==n&&(n&&s.deactivate(n),s.activate(e),n=e)},g=function(e){var t=v();t?o=setTimeout(function(){g(e)},t):m(e)},v=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!n||!e(n).is(s.submenuSelector))return 0;var o=r.offset(),l={x:o.left,y:o.top-s.tolerance},c={x:o.left+r.outerWidth(),y:l.y},d={x:o.left,y:o.top+r.outerHeight()+s.tolerance},p={x:o.left+r.outerWidth(),y:d.y},f=a[a.length-1],h=a[0];if(!f)return 0;if(h||(h=f),h.x<o.left||h.x>p.x||h.y<o.top||h.y>p.y)return 0;if(i&&f.x===i.x&&f.y===i.y)return 0;var m=c,g=p;"left"===s.submenuDirection?(m=d,g=l):"below"===s.submenuDirection?(m=p,g=d):"above"===s.submenuDirection&&(m=l,g=c);var v=t(f,m),y=t(f,g),w=t(h,m),b=t(h,g);return w>v&&y>b?(i=f,u):(i=null,0)};r.mouseleave(d).find(s.rowSelector).mouseenter(p).mouseleave(f).click(h),e(document).mousemove(c)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}),define("nord/feature/util/ttoTools",["nord/config","nord/feature/util/console"],function(e,t){function r(r){var n,a=e.getValue("tto.methods."+r);if(a===Object(a))for(n in a)if("function"==typeof a[n])try{a[n]()}catch(i){t.error(i,"TTO JS")}}return{callMethods:r}}),define("nord/feature/util/windowHelper",["jquery"],function(e){function t(t){"function"==typeof t&&("undefined"==typeof window.isLoaded||window.isLoaded===!0?t():e(window).on("load",t))}return{addLoadEventHandler:t}}),define("nord/feature/util/domSetWrapper",["jquery"],function(e){function t(t,r,n){var a,i,o=e("<div/>"),s=e(n?n:"<div/>");if(t.constructor===e?o.append(t):e.each(t,function(t,r){o.append(e(r))}),a=o.children(),a.length<=r)return a.wrapAll(s),o.children();for(i=0;i<a.length;i+=r)a.slice(i,i+r).wrapAll(s);return o.children()}return t}),define("nord/feature/interaction/carousel",["jquery","modernizr","lazyload"],function(e,t){function r(t,n){if(this.$element=t.constructor===e?t:e(t),1!==this.$element.length)throw new Error("only 1 element can currently be passed into the Carousel Function ("+this.$element.length+")");if(this.$slides=this.$element.children("section, div, article, aside, a, ul, li"),0===this.$slides.length)throw new Error("There are no slides for the element to make it into a carousel");this.options=e.extend({},r.defaults,n||{}),this.currentSlide=this.options.firstSlide||0,this.autoInterval=!1,this.hasReachedEnd=!1,this.init()}function n(e,r){{var n=this.$slides.eq(e);this.$slides.filter(".active")}n.css("left",this.options.width),t.csstransitions?setTimeout(function(){n.addClass("active").css("left","")},5):n.addClass("active").stop().animate({left:0},this.options.animateDuration),this.currentSlide=e,"function"==typeof r&&r()}function a(e,r){var n=this.$slides.eq(e),a=this.$slides.filter(".active");t.csstransitions?n.addClass("active"):(n.addClass("active").stop().animate({opacity:1},this.options.animateDuration),a.stop().animate({opacity:0},this.options.animateDuration)),this.currentSlide=e,"function"==typeof r&&r()}function i(e,r){var n=this.$slides.eq(e),a=(this.$slides.filter(".active"),e*this.options.width*-1);t.csstransitions?(this.$elementWrapper.css("left",a),n.addClass("active")):(this.$elementWrapper.animate({left:a},this.options.animateDuration),n.addClass("active")),this.currentSlide=e,"function"==typeof r&&r()}return r.defaults={animateDuration:600,animateType:"slide",width:"auto",height:"auto",autoPauseDuration:5e3,autoAnimate:!0},r.prototype={constructor:r,init:function(){var n=this,a=this.$element.siblings(".carousel-splash-image");this.$element.addClass("carousel-container").addClass("carousel-animate-"+this.options.animateType),this.$slides.addClass("carousel-slide"),this.$element.find("img.lazy").lazyload({event:"lazy-load"});var i=this.$slides.eq(0);if(i.find("img.lazy").trigger("lazy-load"),a.hasClass("carousel-splash-first-tile")&&i.append(a),"auto"===this.options.width&&(this.options.width=Math.max.apply(null,this.$slides.map(function(){return e(this).outerWidth()}).get())),"auto"===this.options.height&&(this.options.height=Math.max.apply(null,this.$slides.map(function(){return e(this).outerHeight()}).get())),this.$element.css("height",this.options.height).css("width",this.options.width),t.csstransitions&&this.options.animateDuration!==r.defaults.animateDuration){var o=this.$element.attr("id")?"#"+this.$element.attr("id")+o:".carousel-container.carousel-animate-"+this.options.animateType+" .carousel-slide.active";e("head").append(['<style type="text/css">',o," {","  -webkit-transition-duration: ",this.options.animateDuration,"ms;","  -moz-transition-duration: ",this.options.animateDuration,"ms;","  transition-duration: ",this.options.animateDuration,"ms;","} </style>"].join(""))}"push"===this.options.animateType?(this.$element.wrapInner('<div class="carousel-wrapper clearfix"></div>'),this.$elementWrapper=this.$element.children(".carousel-wrapper"),this.$elementWrapper.css("width",this.options.width*this.$slides.length),this.$slides.css("width",this.options.width).css("height",this.options.height)):"fade"===this.options.animateType&&(this.options.animateDuration=2*this.options.animateDuration),this.goTo(this.currentSlide),this.options.autoAnimate&&this.startAuto(),this.$slides.on("focus.carousel","a[href]",function(t){var r;n.stopAuto(),t.delegateTarget&&e(t.delegateTarget).hasClass("active")===!1&&(r=n.$slides.index(t.delegateTarget),n.goTo(r)),n.resetTabindex()}),this.$element.trigger("carousel-init",this.getState())},option:function(e,t){return void 0!==t&&(this.options[e]=t),this.options[e]},getElement:function(){return this.$element},getState:function(){return{slideNumber:this.currentSlide,slideElement:this.$slides.filter(".active"),atStart:0===this.currentSlide,atEnd:this.currentSlide===this.$slides.length-1,hasReachedEnd:this.hasReachedEnd}},resetTabindex:function(){this.$slides.find("a").attr("tabindex",-1),this.getState().slideElement.find("a").attr("tabindex",0)},goTo:function(e){var t=this.$slides.eq(e),r=this.$slides.filter(".active"),o=this.$element,s=this,l=function(){o.trigger("carousel-change-end",s.getState())};if(t.hasClass("active"))return void l();switch(o.trigger("carousel-change-start",{slideNumber:this.currentSlide,slideElement:r}),t.find("img.lazy").trigger("lazy-load").end().next().find("img.lazy").trigger("lazy-load"),this.$slides.filter(".previously-active").removeClass("previously-active").end().filter(".active").addClass("previously-active").removeClass("active"),this.options.animateType){case"slide":n.apply(this,[e,l]);break;case"fade":a.apply(this,[e,l]);break;case"push":default:i.apply(this,[e,l])}this.getState().atEnd&&(this.hasReachedEnd=!0)},startAuto:function(){this.stopAuto();var e=this;this.autoInterval=setInterval(function(){e.next()},this.options.autoPauseDuration)},stopAuto:function(){this.autoInterval&&clearInterval(this.autoInterval)},next:function(){var e=this.currentSlide+1;0===this.$slides.eq(e).length&&(e=0,this.stopAuto()),this.goTo(e)},prev:function(){var e=this.currentSlide-1;0>e&&(e=this.$slides.length-1),this.goTo(e)}},r}),define("nord/util/dom/ensureElement",[],function(){function e(e){return"string"==typeof e&&(e=t.querySelector(e)),e&&1===e.nodeType?e:null}var t=window.document;return e}),define("nord/util/string/toConstantCase",[],function(){function e(e){return e+"_"}var t=/[a-z](?=[A-Z ])/g,r=/-/g,n=/\W/g;return function(a){return a.replace(t,e).replace(r,"_").replace(n,"").toUpperCase()}}),define("nord/util/object/keysToConstants",["nord/util/string/toConstantCase"],function(e){function t(t){var r,n,a={};for(r in t)n=r,r=e(r),a[r]=n;return Object.freeze&&Object.freeze(a),a}return t}),define("nord/feature/social/pinterest",["jquery","nord/feature/util/console","nord/feature/util/scriptLoader","nord/feature/util/querystring","nord/util/dom/ensureElement","nord/util/object/keysToConstants"],function(e,t,r,n,a,i){function o(){return s()}function s(){return h||(h=r.load(m)),h}function l(e){var t,r=g.createElement("a");for(t in e)e.hasOwnProperty(t)&&r.setAttribute("data-pin-"+t,e[t]);return r}function u(e){e=e||"//assets.pinterest.com/images/pidgets/pinit_fg_en_rect_red_20.png";var t=g.createElement("img");return t.setAttribute("src",e),t}function c(e){var t,r={};return e.attributes.forEach(function(e){t=e.nodeName.match(v),t&&t.length&&(r[t[1]]=e.nodeValue)}),r}function d(e,t,r,i){i=i||{};var o,s,c=u();return i.container&&(s=i.container,delete i.container),o=l(i),o.setAttribute("href","//www.pinterest.com/pin/create/button/"+n.serialize({url:e,media:t,description:r})),o.appendChild(c),s=a(s),s?(s.appendChild(o),s):o}function p(r,n){var a,i,o,s,l;switch(n=n||{},n.doo=r,r){case y.PIN:if(!n.url||!n.media||!n.description)return t.error("Error: Pin It Button requires username, media and description options.");a=n.description,o=n.media,s=n.url,delete n.description,delete n.media,delete n.url,i=d(s,o,a,n);break;case y.FOLLOW:if(!n.username)return t.error("Error: Follow Button requires username option.");l=n.username,delete n.username,i=d(l,n)}return e.Deferred().resolve(i)}function f(e){var r;return(e=a(e))?(r=c(e),r.container=e,void p(r.doo,r)):t.error("Error: pinterest#renderWidgets requires a container argument.")
}var h,m="//assets.pinterest.com/js/pinit_main.js",g=window.document,v=/^data\-(.+)$/,y={pin:"buttonPin",follow:"buttonFollow"};return{init:o,createWidget:p,renderWidgets:f,widgets:i(y)}}),define("nord/feature/interaction/_carouselControls",["jquery","nord/feature/interaction/carousel","nord/feature/social/pinterest"],function(e,t,r){function n(r,a){if(r.constructor!==t)throw new Error("Type Error: CarouselControls requires that the first parameter be an instance of a Carousel");return this.carousel=r,this.$carouselElement=this.carousel.getElement(),this.options=e.extend({},n.defaults,a||{}),this.elements={},this.init()}function a(){var e=["sprite-arrow-",this.options.arrowType,"-",this.options.arrowSize,"-",this.options.arrowColor,"-"].join(""),t=(this.carousel,this.elements,this.$carouselElement);if(this.options.arrowClassOverride&&(e=this.options.arrowClassOverride),u.indexOf(e)<0)throw new Error("Invalid arrow class name: "+e);this.elements.$leftArrow=s.apply(this,["prev",e]),this.elements.$rightArrow=s.apply(this,["next",e]),this.options.arrowOutside?t.after(this.elements.$leftArrow).after(this.elements.$rightArrow):t.append(this.elements.$leftArrow).append(this.elements.$rightArrow)}function i(){var t,r,n=(this.carousel,this.elements),a=this.options.dotClassOverride||"carousel-control-dot";if(this.options.dotAppendTo.constructor===e&&1===this.options.dotAppendTo.length){t=this.options.dotAppendTo;for(var i=0;i<this.carousel.$slides.length;i++)t.append(l.apply(this,[i]));r=t.children("."+a),n.$dots=r,this.options.dotCenterAbsolute&&"absolute"===t.css("position")&&t.css("left",(t.parent().width()-t.outerWidth())/2)}}function o(){}function s(t,r){var n="prev"===t?"carousel-control-prev":"carousel-control-next",a="prev"===t?"previous":"next",i=r,o=this.carousel;return i+="prev"===t?"left":"right",e("<button />",{"class":["sprite","ir",n,i].join(" "),type:"button"}).text(a).on("click.carouselControl",function(){e(this).hasClass("disabled")||("prev"===t?o.prev():o.next(),o.stopAuto(),o.resetTabindex())})}function l(t){var r=this.options.dotClassOverride||"carousel-control-dot",n=this.carousel;return e("<button />",{"class":[this.options.dotColor,r].join(" "),type:"button",tabindex:-1}).text("Slide "+(t+1)).on("click.carouselControl",function(){n.goTo(t),n.stopAuto(),n.resetTabindex()})}var u=["sprite-arrow-arc-normal-black-","sprite-arrow-arc-normal-white-","sprite-arrow-arc-large-black-","sprite-arrow-arc-large-white-","sprite-arrow-double-normal-black-","sprite-arrow-swatch-normal-black-","sprite-arrow-prodcarousel-normal-white-","prodcarousel-arrow-","sprite-arrow-lookbook-"];return n.defaults={arrowShow:!1,arrowOutside:!1,arrowSize:"normal",arrowType:"arc",arrowColor:"black",arrowContinuous:!1,dotShow:!1,dotAppendTo:!1,dotCenterAbsolute:!0,dotColor:"black",dotPlacement:"inside",navShow:!1,navType:"tray"},n.prototype={constructor:n,init:function(){var e=this;return this.$carouselElement.hasClass("rotate")&&(this.options.arrowContinuous=!0),this.options.arrowShow&&a.apply(this,[]),this.options.dotShow&&i.apply(this,[]),this.options.navShow&&o.apply(this,[]),this.$carouselElement.on("carousel-change-end",function(){e.refreshElements()}),this.$carouselElement.find(".pinterest-wrapper").length&&r.init(),this.refreshElements(),this.elements.$leftArrow.toggleClass("disabled",this.carousel.getState().atStart),this.elements},getElements:function(){return this.elements},refreshElements:function(){var e=this.carousel.getState(),t=e.atStart&&!(e.hasReachedEnd&&this.options.arrowContinuous),r=e.atEnd&&!this.options.arrowContinuous;this.elements.$leftArrow&&this.elements.$rightArrow&&(this.elements.$leftArrow.toggleClass("disabled",t),this.elements.$rightArrow.toggleClass("disabled",r)),this.elements.$dots&&this.elements.$dots.removeClass("active").eq(e.slideNumber).addClass("active")}},n}),define("text!nord/feature/recommendations/layouts/templates/partials/productItem.html",[],function(){return'{{! Partial has to call the product section to have acccess to the entire ViewModel object. }}\r\n{{#products}}\r\n	<li class="product-item product-item-{{{layout.productImageSize}}}{{#IsBeauty}} beauty{{/IsBeauty}}" data-style-number="{{{StyleNumber}}}" data-style-id="{{{Id}}}" itemscope itemtype="http://schema.org/Product">\r\n		<a href="{{{ViewData.ProductUrl}}}" class="product-photo-href" tabindex="-1">\r\n			{{#Title}}\r\n				<span class="ada-hidden">{{{Title}}}</span>\r\n			{{/Title}}\r\n			<img class="product-photo lazy" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-original="{{{urls.gallery}}}{{{layout.productImageSize}}}{{{PhotoPath}}}" {{#layout.displayAltImage}}{{#AltPhotoPath}}data-alt-image="{{{urls.gallery}}}{{{layout.productImageSize}}}{{{AltPhotoPath}}}"{{/AltPhotoPath}}{{/layout.displayAltImage}} alt="{{{Title}}}" itemprop="image" />\r\n			{{#IsBeauty}}\r\n				{{#ViewData.HasTwoPlusColors}}\r\n					<div class="swatch-inset hidden"></div>\r\n				{{/ViewData.HasTwoPlusColors}}\r\n			{{/IsBeauty}}\r\n		</a>\r\n		<div class="product-details">\r\n			{{#ViewData.HasTwoPlusColors}}\r\n				{{#featureFlags.isSwatchDisplayEnabled}}\r\n					<style type="text/css">\r\n						#swatchResults-{{Id}} .product-swatch-img {\r\n							background-image: url{{!preventTheDammUrlParsingRegExp}}({{{urls.imageDelivery}}}/swatchsprite.jpg?photos={{{SpriteName}}}&width={{{swatch.width}}}&height={{{swatch.height}}}&ql=60);\r\n						}\r\n					</style>\r\n					<ul id="swatchResults-{{Id}}" class="product-swatches">\r\n						{{#AvailableColors}}\r\n							<li class="product-swatch-wrap{{^IsBeauty}}{{#Selected}} active default{{/Selected}}{{/IsBeauty}}" {{#productImageUrl}}data-product-image-url="{{{urls.gallery}}}{{{layout.productImageSize}}}{{{productImageUrl}}}"{{/productImageUrl}} {{#swatchImageUrl}}data-swatch-image-url="{{{urls.gallery}}}SwatchMedium{{{swatchImageUrl}}}"{{/swatchImageUrl}}>\r\n								<a title="{{{ColorName}}}" aria-selected="{{^IsBeauty}}{{{Selected}}}{{/IsBeauty}}" class="product-swatch">\r\n									<span class="product-swatch-img ir" style="background-position:-{{#getSwatchOffset}}{{{SpriteIndex}}}{{/getSwatchOffset}}px 0;">{{{ColorName}}}</span>\r\n								</a>\r\n							</li>\r\n						{{/AvailableColors}}\r\n					</ul>\r\n				{{/featureFlags.isSwatchDisplayEnabled}}\r\n				{{^featureFlags.isSwatchDisplayEnabled}}\r\n					{{#featureFlags.isAvailableColorCountEnabled}}\r\n						<div class="product-swatches">\r\n							<a href="{{{ViewData.ProductUrl}}}" class="product-href swatch-count">{{{ViewData.NumberOfAvailableColors}}} COLORS</a>\r\n						</div>\r\n					{{/featureFlags.isAvailableColorCountEnabled}}\r\n				{{/featureFlags.isSwatchDisplayEnabled}}\r\n			{{/ViewData.HasTwoPlusColors}}\r\n			{{#Highlight}}\r\n				<span class="{{{HighlightStyle}}}">{{{Highlight}}}</span>\r\n			{{/Highlight}}\r\n			{{#Title}}\r\n				<a href="{{{ViewData.ProductUrl}}}" class="product-href" itemprop="url"><span itemprop="name">{{{Title}}}</span></a>\r\n			{{/Title}}\r\n			{{^SupressPrice}}\r\n				<div class="product-price{{#ViewData.PriceClasses}} {{{.}}}{{/ViewData.PriceClasses}}" itemprop="offers" itemscope="" itemtype="http://schema.org/Offer">\r\n					{{#IsUMAPPED}}\r\n						<span>Add to cart to see price</span>\r\n					{{/IsUMAPPED}}\r\n					{{^IsUMAPPED}}\r\n						{{#ViewData.IsSalePrice}}\r\n							{{#PriceDisplay.RegularPrice}}<span class="regular">{{{PriceDisplay.RegularPrice}}}</span>{{/PriceDisplay.RegularPrice}}\r\n							{{#PriceDisplay.SalePrice}}<span class="sale" itemprop="price">{{{PriceDisplay.SalePrice}}}</span>{{/PriceDisplay.SalePrice}}\r\n							{{#PriceDisplay.PercentOff}}<span class="percentoff">{{{PriceDisplay.PercentOff}}}</span>{{/PriceDisplay.PercentOff}}\r\n						{{/ViewData.IsSalePrice}}\r\n						{{#ViewData.IsRegularPrice}}\r\n							{{#PriceDisplay.RegularPrice}}<span class="regular" itemprop="price">{{{PriceDisplay.RegularPrice}}}</span>{{/PriceDisplay.RegularPrice}}\r\n						{{/ViewData.IsRegularPrice}}\r\n					{{/IsUMAPPED}}\r\n				</div>\r\n			{{/SupressPrice}}\r\n			{{#ViewData.HasRating}}\r\n				<div class="product-rating stars-{{{ViewData.RoundedRatingClass}}}">\r\n					<span class="ada-hidden">Rating {{{AverageRating}}} out of 5 stars</span>\r\n				</div>\r\n			{{/ViewData.HasRating}}\r\n		</div>\r\n	</li>\r\n{{/products}}\r\n'}),define("text!nord/feature/recommendations/layouts/templates/partials/seedProductItem.html",[],function(){return'<div class="recs-results">\r\n	<div class="product-item product-item-medium{{#seedProduct.IsBeauty}} beauty{{/seedProduct.IsBeauty}}" data-style-number="{{{seedProduct.StyleNumber}}}" data-style-id="{{{seedProduct.Id}}}" itemscope itemtype="http://schema.org/Product">\r\n		<a href="{{{seedProduct.ViewData.ProductUrl}}}" class="product-photo-href">\r\n			{{#seedProduct.Title}}\r\n				<span class="ada-hidden">{{{seedProduct.Title}}}</span>\r\n			{{/seedProduct.Title}}\r\n			<img class="product-photo lazy" src="" data-original="{{{urls.gallery}}}medium{{{seedProduct.PhotoPath}}}" {{#seedProduct.AltPhotoPath}}data-alt-image="{{{urls.gallery}}}medium{{{seedProduct.AltPhotoPath}}}"{{/seedProduct.AltPhotoPath}} alt="{{{seedProduct.Title}}}" itemprop="image" />\r\n			{{#seedProduct.IsBeauty}}\r\n				{{#seedProduct.ViewData.HasTwoPlusColors}}\r\n					<div class="swatch-inset hidden"></div>\r\n				{{/seedProduct.ViewData.HasTwoPlusColors}}\r\n			{{/seedProduct.IsBeauty}}\r\n		</a>\r\n		<div class="product-details">\r\n			{{#seedProduct.ViewData.HasTwoPlusColors}}\r\n				{{#featureFlags.isSwatchDisplayEnabled}}\r\n					<style type="text/css">\r\n						#swatchResults-{{seedProduct.Id}} .product-swatch-img {\r\n							background-image: url{{!preventTheDammUrlParsingRegExp}}({{{urls.imageDelivery}}}/swatchsprite.jpg?photos={{{seedProduct.SpriteName}}}&width={{{seedProduct.swatch.width}}}&height={{{seedProduct.swatch.height}}}&ql=60);\r\n						}\r\n					</style>\r\n					<ul id="swatchResults-{{seedProduct.Id}}" class="product-swatches">\r\n						{{#seedProduct.AvailableColors}}\r\n							<li class="product-swatch-wrap{{^seedProduct.IsBeauty}}{{#Selected}} active default{{/Selected}}{{/seedProduct.IsBeauty}}" {{#productImageUrl}}data-product-image-url="{{{urls.gallery}}}{{{layout.productImageSize}}}{{{productImageUrl}}}"{{/productImageUrl}} {{#swatchImageUrl}}data-swatch-image-url="{{{urls.gallery}}}SwatchMedium{{{swatchImageUrl}}}"{{/swatchImageUrl}}>\r\n								<a title="{{{ColorName}}}" aria-selected="{{^seedProduct.IsBeauty}}{{{Selected}}}{{/seedProduct.IsBeauty}}" class="product-swatch">\r\n									<span class="product-swatch-img ir" style="background-position:-{{#getSwatchOffset}}{{{SpriteIndex}}}{{/getSwatchOffset}}px 0;">{{{ColorName}}}</span>\r\n								</a>\r\n							</li>\r\n						{{/seedProduct.AvailableColors}}\r\n					</ul>					\r\n				{{/featureFlags.isSwatchDisplayEnabled}}\r\n				{{^featureFlags.isSwatchDisplayEnabled}}\r\n					{{#featureFlags.isAvailableColorCountEnabled}}\r\n						<div class="product-swatches"><a href="{{{seedProduct.ViewData.ProductUrl}}}" class="product-href swatch-count">{{{seedProduct.ViewData.NumberOfAvailableColors}}} COLORS</a></div>\r\n					{{/featureFlags.isAvailableColorCountEnabled}}\r\n				{{/featureFlags.isSwatchDisplayEnabled}}\r\n			{{/seedProduct.ViewData.HasTwoPlusColors}}\r\n			{{#seedProduct.Highlight}}\r\n				<span class="{{{seedProduct.HighlightStyle}}}">{{{seedProduct.Highlight}}}</span>\r\n			{{/seedProduct.Highlight}}\r\n			{{#seedProduct.Title}}\r\n				<a href="{{{seedProduct.ViewData.ProductUrl}}}" class="product-href" itemprop="url"><span itemprop="name">{{{seedProduct.Title}}}</span></a>\r\n			{{/seedProduct.Title}}\r\n			{{^seedProduct.SupressPrice}}\r\n				<div class="product-price{{#seedProduct.ViewData.PriceClasses}} {{{.}}}{{/seedProduct.ViewData.PriceClasses}}" itemprop="offers" itemscope="" itemtype="http://schema.org/Offer">\r\n					{{#seedProduct.IsUMAPPED}}\r\n						<span>Add to cart to see price</span>\r\n					{{/seedProduct.IsUMAPPED}}\r\n					{{^seedProduct.IsUMAPPED}}\r\n						{{#seedProduct.ViewData.IsSalePrice}}\r\n							{{#seedProduct.PriceDisplay.RegularPrice}}<span class="regular">{{{seedProduct.PriceDisplay.RegularPrice}}}</span>{{/seedProduct.PriceDisplay.RegularPrice}}\r\n							{{#seedProduct.PriceDisplay.SalePrice}}<span class="sale" itemprop="price">{{{seedProduct.PriceDisplay.SalePrice}}}</span>{{/seedProduct.PriceDisplay.SalePrice}}\r\n							{{#seedProduct.PriceDisplay.PercentOff}}<span class="percentoff">{{{seedProduct.PriceDisplay.PercentOff}}}</span>{{/seedProduct.PriceDisplay.PercentOff}}\r\n						{{/seedProduct.ViewData.IsSalePrice}}\r\n						{{#seedProduct.ViewData.IsRegularPrice}}\r\n							{{#seedProduct.PriceDisplay.RegularPrice}}<span class="regular" itemprop="price">{{{seedProduct.PriceDisplay.RegularPrice}}}</span>{{/seedProduct.PriceDisplay.RegularPrice}}\r\n						{{/seedProduct.ViewData.IsRegularPrice}}\r\n					{{/seedProduct.IsUMAPPED}}\r\n				</div>\r\n			{{/seedProduct.SupressPrice}}\r\n			{{#seedProduct.ViewData.HasRating}}\r\n				<div class="product-rating stars-{{{seedProduct.ViewData.RoundedRatingClass}}}">\r\n					<span class="ada-hidden">Rating {{{seedProduct.AverageRating}}} out of 5 stars</span>\r\n				</div>\r\n			{{/seedProduct.ViewData.HasRating}}\r\n		</div>\r\n	</div>\r\n</div>\r\n'}),define("nord/feature/recommendations/layouts/bindings/fullWidthSeededWithAd.js",["jquery"],function(e){function t(t){var r=t.parent(),o=r.siblings(".recs-group-link").children("a"),s=r.css("maxHeight");o.on("click",function(t){var o,l,u=e(this);u.text()===n?(o=i,l=a):(o=s,l=n),r.animate({maxHeight:o},400,function(){u.text(l)}),t.preventDefault()})}function r(e){e.find(".product-item").length&&e.parent().find(".recs-group-edge").addClass("hidden")}var n="Show More",a="Show Less",i="1500px";return{always:function(e){t(e),r(e)}}}),define("nord/feature/recommendations/layouts/bindings/fullWidthSeededPersonalized.js",["jquery"],function(){return{postRender:function(e){e.parent().addClass("collapsed").after('<div class="recs-group-link"><a href="#">Show More</a></div>'),e.parent().removeClass("hidden"),e.parent().find(".recs-group-edge").removeClass("hidden")}}}),define("nord/feature/recommendations/layouts/bindings/fullWidthMediumWithSeed.js",["jquery"],function(){return{postRender:function(e){var t=e.find(".reject-seed-link"),r=e.find(".reject-seed-caller"),n=r.attr("data-original");t.on("click.recsRejectSeed",function(){e.slideToggle("slow",function(){r.attr("src",n)})})}}}),define("text!nord/feature/recommendations/layouts/templates/standardHeader.html",[],function(){return'<header>\r\n	<h2>{{{headerText}}}</h2>\r\n	{{#headerLink}}\r\n		<div class="headerLink">{{{headerLink}}}</div>\r\n	{{/headerLink}}\r\n</header>\r\n<ul class="fashion-results">\r\n	{{> productTemplate}}\r\n</ul>'}),define("text!nord/feature/recommendations/layouts/templates/getRecsAd.html",[],function(){return'<ul class="fashion-results">\r\n	{{> productTemplate}}\r\n</ul>\r\n{{#recImage}}\r\n<div class="get-recs-ad">\r\n		{{{recImage}}}\r\n		<div class="recs-personal-text" style="top: {{{msgYCoordinate}}}px;">\r\n			{{#shopper.isLoggedIn}}{{{shopper.firstName}}},<br />{{/shopper.isLoggedIn}}\r\n			<span>{{{recMessage}}}</span>\r\n		</div>\r\n		{{{headerLink}}}\r\n</div>\r\n{{/recImage}}\r\n'}),define("text!nord/feature/recommendations/layouts/templates/productGetRecsAd.html",[],function(){return'<header>\r\n	<h2>{{{headerText}}}</h2>\r\n	{{#headerLink}}\r\n		<div class="headerLink">{{{headerLink}}}</div>\r\n	{{/headerLink}}\r\n</header>\r\n<ul class="fashion-results">\r\n	{{> productTemplate}}\r\n	<li class="get-recs-ad">\r\n		<h2>Find more to love.</h2>\r\n        <a href="{{urls.store}}c/recommendations/1/">Shop recommendations for you.</a>\r\n    </li>\r\n</ul>'}),define("text!nord/feature/recommendations/layouts/templates/seededShelf.html",[],function(){return'<div class="recs-title">\r\n	<div class="recs-seed-title"><img src="{{seedHeaderGraphic}}" alt="{{seedHeaderText}}" /></div>\r\n	<div class="recs-related-title"><img src="{{recsHeaderGraphic}}" alt="{{recsHeaderText}}" /></div>\r\n</div>\r\n<div class="recs-shelf second-shelf">\r\n	{{> seedProductTemplate}}\r\n	<div class="seed-ad">\r\n		<div>\r\n			<div class="headline">\r\n				Like what you see?\r\n			</div>\r\n			{{#headerLink}}\r\n				<div class="headerLink">{{{headerLink}}}</div>\r\n			{{/headerLink}}\r\n		</div>\r\n	</div>\r\n	<ul class="recs-results">\r\n		{{> productTemplate}}\r\n	</ul>\r\n</div>\r\n\r\n'}),define("text!nord/feature/recommendations/layouts/templates/seededPersonalized.html",[],function(){return'<div class="recs-title">\r\n	<div class="recs-seed-title"><img src="{{seedHeaderGraphic}}" alt="{{seedHeaderText}}" /></div>\r\n	<div class="recs-related-title"><img src="{{recsHeaderGraphic}}" alt="{{recsHeaderText}}" /></div>\r\n</div>\r\n<div class="recs-shelf first-shelf">\r\n	{{> seedProductTemplate}}\r\n	<div class="seed-ad">\r\n		<div>\r\n			<img src="{{{urls.image}}}default/shop/image/recommendations/header-discoverNewFavorites.png" width="229" height="54" alt="Discover New Favorites" />\r\n		</div>\r\n		<div>\r\n			{{#shopper.isLoggedIn}}\r\n				{{{shopper.firstName}}}, we think youll love these items inspired by what you viewed.\r\n			{{/shopper.isLoggedIn}}\r\n			{{^shopper.isLoggedIn}}\r\n				We think youll love these items inspired by what you viewed.\r\n			{{/shopper.isLoggedIn}}\r\n		</div>\r\n	</div>\r\n	<ul class="recs-results">\r\n		{{> productTemplate}}\r\n	</ul>\r\n</div>\r\n<section class="recs-group-edge hidden">\r\n	<div class="full-ad">\r\n		<div class="headline">\r\n			Like what you see?\r\n		</div>\r\n		{{#headerLink}}\r\n			<div class="headerLink">{{{headerLink}}}</div>\r\n		{{/headerLink}}\r\n	</div>\r\n</section>\r\n'}),define("text!nord/feature/recommendations/layouts/templates/getRecsSeeded.html",[],function(){return'{{#seedProduct.Id}}\r\n<div class="seed-item">\r\n	<div class="recs-seed-title"><h2>{{{seedHeaderText}}}</h2></div>\r\n	{{> seedProductTemplate}}\r\n	<span class="reject-seed-link">Don\'t use for recommendations</span>\r\n	<img data-original="{{{seedProduct.RejectSeedLink}}}" class="hidden reject-seed-caller" />\r\n</div>\r\n{{/seedProduct.Id}}\r\n<div class="related-items">\r\n	<div class="recs-related-title"><h2>{{{recsHeaderText}}}</h2></div>\r\n	<div>\r\n		<ul class="fashion-results">\r\n			{{> productTemplate}}\r\n		</ul>\r\n	</div>\r\n</div>'}),define("nord/feature/recommendations/layouts/layouts",["jquery","text!nord/feature/recommendations/layouts/templates/partials/productItem.html","text!nord/feature/recommendations/layouts/templates/partials/seedProductItem.html","nord/feature/recommendations/layouts/bindings/fullWidthSeededWithAd.js","nord/feature/recommendations/layouts/bindings/fullWidthSeededPersonalized.js","nord/feature/recommendations/layouts/bindings/fullWidthMediumWithSeed.js","text!nord/feature/recommendations/layouts/templates/standardHeader.html","text!nord/feature/recommendations/layouts/templates/getRecsAd.html","text!nord/feature/recommendations/layouts/templates/productGetRecsAd.html","text!nord/feature/recommendations/layouts/templates/seededShelf.html","text!nord/feature/recommendations/layouts/templates/seededPersonalized.html","text!nord/feature/recommendations/layouts/templates/getRecsSeeded.html"],function(e,t,r,n,a,i,o,s,l,u,c,d){var p="medium",f={productImageSize:"thumbnail",justifyProducts:!0,displayAltImage:!0,carouselOptionEnabled:!1,promoProducts:0,template:o,partials:{productTemplate:t},classes:{placement:[],product:[]},bindings:{postRender:[],always:[]}},h=e.extend({},f,{productImageSize:p,carouselOptionEnabled:!0}),m=e.extend({},f,{justifyProducts:!1}),g=e.extend({},f,{productImageSize:p,promoProducts:1,carouselOptionEnabled:!0,template:l}),v=e.extend({},f,{productImageSize:p,displayAltImage:!1,justifyProducts:!1,template:s}),y=e.extend(!0,{},f,{productImageSize:p,justifyProducts:!1,template:u,partials:{seedProductTemplate:r},bindings:{always:[n.always]}}),w=e.extend(!0,{},f,{productImageSize:p,justifyProducts:!1,template:c,partials:{seedProductTemplate:r},bindings:{postRender:[a.postRender]}}),b=e.extend(!0,{},f,{productImageSize:p,carouselOptionEnabled:!0,template:d,partials:{seedProductTemplate:r},bindings:{postRender:[i.postRender]}}),S=e.extend({},f,{productImageSize:p,displayAltImage:!1,justifyProducts:!1});return{"Full Width Medium":h,"Right Rail Thumbnail":m,"Vertical Thumbnail":m,"Full Width Thumbnail":f,"Full Width Medium With Chat Ad":g,"Full Width Medium With Center Ad":v,"Full Width Medium With Header":h,"Center Column Thumbnail":f,"Category Nav With Center Ad":v,"Full Width Seeded Expandable":y,"Full Width Top Seeded Expandable":w,"Full Width Medium With Seed":b,"Medium With Black Bar Header":h,"Manually Positioned Product Items":S}}),define("nord/feature/recommendations/util/eachPlacement",["nord/config"],function(e){return function(t){var r,n,a=e.getValueOrDefault("recommendations.placements",{});for(r in a)if(n=t(r,a[r]),void 0!==n)return n}}),define("nord/feature/recommendations/util/renderSwatches",["jquery","nord/config","nord/feature/interaction/carousel","nord/feature/interaction/_carouselControls","nord/feature/util/domSetWrapper"],function(e,t,r,n,a){function i(t){var i=7,o=t.find(".product-swatches");o.each(function(){var t,o,s,l,u;t=e(this),o=t.find(".product-swatch-wrap"),o.length>i&&(s=t.wrapInner('<ul class="product-swatch-carousel"></ul>').find(".product-swatch-carousel"),s.html(a(o,i,'<ul class="swatch-set" />')),l=new r(s,{autoAnimate:!1,height:18,width:167,animateType:"push",firstSlide:0}),u=new n(l,{arrowShow:!0,arrowOutside:!0,arrowType:"swatch",arrowContinuous:!1}))})}return i}),define("nord/util/math/roundTo",["jquery"],function(e){return function(t,r){var n=0;return r=r||1,e.isNumeric(r)&&e.isNumeric(t)&&(t=parseFloat(t),r=parseFloat(r),n=Math.round(t/r)*r),n}}),define("nord/feature/recommendations/util/getPageType",["jquery","nord/config"],function(e,t){return function(){var e="unknown_page",r=(t.getValueOrDefault("product",!1),t.getValue("analytics.pageType")),n=t.getValueOrDefault("analytics.pageCategoryId",0);return/^Product Page$|^OutfitPage$/.test(r)?e="item_page":"2375500"===n?e="home_page":+n&&/^\d+$/g.test(n)?e="category_page":"SearchPage"===r?e="search_page":"OrderConfirmationPage"===r?e="purchase_complete_page":"WishListPage"===r?e="wish_list_page":"ShoppingBagPage"===r&&(e="cart_page"),e}()}),define("nord/feature/recommendations/util/getProductUrl",["nord/config","nord/feature/util/querystring","nord/feature/recommendations/util/getPageType"],function(e,t,r){function n(n,a,o,s){var l=e.getValue("analytics.pageCategoryId"),u="PP_3"===a?"coordinating":"related",c=[u,o.Id,l,parseFloat(s)+1||"",a.replace(/-/g,"_"),n.replace(/\s/g,"_"),o.ViewData.Strategy],d={origin:c.join("-"),recs_type:u,recs_productId:o.Id||0,recs_categoryId:l,recs_productOrder:parseFloat(s)+1||"",recs_placementId:a.replace(/-/g,"_"),recs_source:n.replace(/\s/g,"_"),recs_strategy:o.ViewData.Strategy,recs_referringPageType:r};return i&&(d.debug=1),t.serialize(d)}function a(e,r,a,i){var s="",l=o+"s/"+a.PathAlias+"/"+a.Id+n(e,r,a,i);return s=a.ViewData&&"string"==typeof a.ViewData.TrackingUrl?t.updateParameter(a.ViewData.TrackingUrl,"ct",encodeURIComponent(l)):l}var i=/debug=1/.test(window.location.search),o=e.getValue("urls.store");return a}),define("nord/feature/recommendations/util/setProductViewData",["nord/config","nord/util/math/roundTo","nord/feature/recommendations/util/getProductUrl"],function(e,t,r){function n(e,n,a,i){var o=[],s=a.IsUMAPPED,l=4===a.SaleType,u=0===a.SaleType||1===a.SaleType,c=!u,d=a.AvailableColors;return Array.isArray(a.AvailableColors)&&(d=a.AvailableColors.length),s&&o.push("price-umap"),l&&o.push("anniversary"),{NumberOfAvailableColors:d,ProductUrl:r(e,n,a,i),HasRating:a.AverageRating>0,PriceClasses:o,RoundedRatingClass:t(a.AverageRating,.25).toString().replace(".","_"),HasTwoPlusColors:d>1,IsAnniversaryPrice:l,IsRegularPrice:u,IsSalePrice:c}}return n}),define("nord/feature/recommendations/util/addProductViewData",["jquery","nord/config","nord/feature/recommendations/util/setProductViewData"],function(e,t,r){function n(e){var r=t.getValueOrDefault("recommendations.v2.AnniversaryGWPBrands",[]),n=""+e.BrandLabelId;"highlight GWP"===e.HighlightStyle&&t.getValue("features.isEarlyAccessEnabled")&&t.getValue("shopper.isEarlyAccessEligible")&&r.indexOf(n)>-1&&(e.Highlight="",e.HighlightStyle="")}function a(t,a,i){var o,s,l,u=i.products;if(i.seedProduct&&e.extend(i.seedProduct.ViewData,r(t,a,i.seedProduct)),Array.isArray(u))for(s=u.length,o=0;s>o;o++)l=u[o],e.extend(l.ViewData,r(t,a,u[o],o)),n(l)}return a}),define("nord/feature/recommendations/util/addPhotoSwatchBindings",["jquery","nord/feature/util/querystring"],function(e,t){function r(r){var n="lazy",a=".product-item",i=".product-photo",o=i+"[data-alt-image]",s=".product-swatch-wrap",l=".product-swatch",u=".swatch-inset",c=".product-swatch-wrap.active",d=".product-swatch-wrap.default.active",p=".product-photo-href",f=p+", .product-href",h="active",m="beauty",g="hidden",v=r.find(i),y=r.find(p),w=r.find(s),b=r.find(f);v.filter("."+n).lazyload({effect:"fadeIn",effect_speed:400,load:function(){e(this).removeClass(n)}}),y.has(o).on("mouseenter.displayProductAltImg",function(){var t,r,n,i=e(this).parents(a).find(s);(!i.length||i.filter(d).length)&&(r=e(this).children(o),n=r.data("original"),t=r.data("altImage"),r.attr("src",t).one("mouseleave.displayProductDefaultImg",function(){r.attr("src",n)}))}),w.on("click.swatchActive",function(){var t=e(this),r=t.parents(a);r.find(c).removeClass(h),t.addClass(h),r.hasClass(m)?r.find(u).css("background-image","url("+t.data("swatchImageUrl")+")").removeClass(g):(r.find(i).attr("src",t.data("productImageUrl")),t.off("mouseleave.swatchHover"))}),w.on("mouseenter.swatchHover",function(){var t=e(this),r=t.parents(a),n=r.find(u),o=r.find(i),s=r.find(c);r.hasClass(m)?(n.css("background-image","url("+t.data("swatchImageUrl")+")").removeClass(g),t.one("mouseleave.swatchHover",function(){var e=r.find(c);e.length?n.css("background-image","url("+e.data("swatchImageUrl")+")"):n.addClass(g)})):(r.find(i).attr("src",t.data("productImageUrl")),t.one("mouseleave.swatchHover",function(){var e=s.length?s.data("productImageUrl"):o.data("original");o.attr("src",e)}))}),b.on("click.addFashionColor",function(){var r,n,i,o,s=e(this),u=s.parents(a).find(c);u.length&&(o=u.find(l).attr("title"),o&&(r=s.attr("href"),n=t.deserialize(r).ct,i=n||r,i=t.updateParameter(i,"fashionColor",encodeURIComponent(o)),n&&(i=t.updateParameter(r,"ct",encodeURIComponent(i))),s.attr("href",i)))})}return r}),define("nord/feature/recommendations/util/timingUtil",["jquery","nord/config"],function(e,t){function r(e){var t,r,n="";if(u&&u.length)for(r=Math.min(u.length,o),t=0;r>t;t++)if(u[t].id&&(n=u[t].id.replace(s,""),n===e))return l+(t+1)}function n(e){var t=r(e);t&&i(t)}function a(e,t){window.nord.recsTiming.results[e]=t}function i(e){window.nord.recsTiming.results[e]=Date.now()-t.getValue("analytics.pageStart")}var o=3,s="recs-placement-",l="placement",u=e(".recs-placement");return window.nord.recsTiming={results:{}},{timeStampPlacement:n,saveMeasurement:i,saveMeasurementValue:a}}),define("nord/feature/recommendations/util/renderPlacements",["jquery","mustache","nord/config","nord/feature/util/domSetWrapper","nord/feature/interaction/carousel","nord/feature/interaction/_carouselControls","nord/feature/recommendations/layouts/layouts","nord/feature/recommendations/util/eachPlacement","nord/feature/recommendations/util/renderSwatches","nord/feature/recommendations/util/addProductViewData","nord/feature/recommendations/util/addPhotoSwatchBindings","nord/feature/recommendations/util/timingUtil"],function(e,t,r,n,a,i,o,s,l,u,c,d){function p(t,r){var n,a,i,o="";for(o in r)r.hasOwnProperty(o)&&(n=r[o],i=e(I,D+o),a=n.productIds,i.length?f(i,t,o,a,n):m(t,o,n))}function f(e,t,r,n,a){var i=0;e.each(function(e){return e.data("style-id")!==n[i]?void m(t,r,a):void i++})}function h(e,t){Array.isArray(t)&&t.forEach(function(t){Array.isArray(t)&&t.forEach(function(t){"function"==typeof t&&t(e)})})}function m(t,n,a){var i,s=E[n],l=s?o[s.layout]:"",c=e(D+n),p={layout:l,urls:r.getValueOrDefault("urls",{}),shopper:r.getValueOrDefault("shopper",{}),swatch:{width:C,height:A}},f={getSwatchOffset:function(){return function(e,t){return t(e)*C+""}}};"Rich Relevance MyRecs API"!==t||a.seedProduct||"Full Width Medium"===s.layout||(s.layout="Full Width Medium",s.recsPerPage=5,l=o[s.layout]),l&&(e.extend(p,l),g(s,n),!Array.isArray(a.products)||a.products.length<s.minRecs?h(c,[l.bindings.always]):(u(t,n,a),l.carouselOptionEnabled&&s.featureFlags.isCarousel||(a.products=a.products.slice(0,s.recsPerPage),a.productIds=a.productIds.slice(0,s.recsPerPage)),i=e.extend({},s,a,p,f),v(l,e(D+n),i,s),d.timeStampPlacement(n)))}function g(t,r){var n=[t.layout,t.recsSource];t.featureFlags.isFashionSearchEnabled&&n.push(T),e(x+r).addClass(n.map(function(e){return e.replace(/ /g,"-").toLowerCase()}).join(" "))}function v(e,r,n,a){var i;return h(r,[e.bindings.preRender]),r.addClass(e.classes.placement.join(" ")).html(t.render(e.template,n,e.partials)).find(I).addClass(e.classes.product.join(" ")),l(r),i=r.find(S+" "+I),"Manually Positioned Product Items"===a.layout?void y(r,n,a):(r.removeClass("hidden"),h(r,[e.bindings.postRender,e.bindings.always]),c(r),void(e.carouselOptionEnabled&&a.featureFlags.isCarousel&&i.length>a.recsPerPage?(w(r,a,i),b(r.find(".recs-product-slide"),a,e)):e.justifyProducts&&(r.addClass("noCarousel"),b(r.find(S),a,e))))}function y(t,r,n){Array.isArray(n.productItemPositions)&&n.productItemPositions.forEach(function(n,a){var i=e(k?n.mobileParentSelector:n.parentSelector);i.length&&(k||/absolute|relative/.test(i.css("position"))||i.css("position","relative"),t.find(I).eq(a).each(function(){var t,o,s=e(this),l=s.find(".product-photo"),u=s.children(".product-details"),c=r.products[a].PriceDisplay;s.addClass("manually-positioned-recs "+n.productItemClass),k||s.css({position:"absolute",left:parseFloat(n.productItemCoordinates.X),top:parseFloat(n.productItemCoordinates.Y)}),o=l.data("original"),o=k?o.replace(/\/medium\//,"/gigantic/"):o,l.removeClass("lazy").attr("src",o),u.find(".product-href span").html(r.products[a].BrandLabelName),u.children(".highlight, .product-rating").remove(),t=c.SalePrice?c.SalePrice.replace(/NOW: /i,""):c.RegularPrice,u.find(".product-price").html('<span class="regular" itemprop="price">'+t+"</span>"),i.append(this.outerHTML.replace(/^<li/,"<div").replace(/li>$/,"div>"))}))})}function w(e,t,r){var o,s,l,u,c;o=e.find(S),s=o.wrapInner('<ul class="recs-product-carousel"></ul>').find(".recs-product-carousel"),s.html(n(r,t.recsPerPage,'<div class="recs-product-slide" />')),u=new a(s,{autoAnimate:!1,autoPauseDuration:5e3,animateType:"push",animateDuration:600}),c=new i(u,{arrowShow:!0,arrowOutside:!0,arrowClassOverride:"prodcarousel-arrow-",dotShow:!0,dotAppendTo:o.prepend('<div class="recs-navigation-dots"></div>').find(".recs-navigation-dots"),dotClassOverride:"prodcarousel-dot"}),l=s.position().top,c.$leftArrow.css("top",l),c.$rightArrow.css("top",l)}function b(t,r,n){t.each(function(){var t,a,i=e(this),o=i.children(),s=0,l=0;r.recsPerPage>1&&(a=r.recsPerPage+n.promoProducts,t=i.width()-a*o.outerWidth(),s=t/(a-1)),o.first().css(P,0),o.slice(1).each(function(){var t=s;l+=s%1,l>=1&&(t++,l--),e(this).css(P,Math.floor(t))})})}var S=(e(document),".fashion-results"),P="margin-left",C=12,A=12,I=".product-item",D="#recs-placement-",x="#recs-placement-",T="fashion-search",k=e("body").hasClass("-mobile"),E=(r.getValueOrDefault("recommendations.v2")||{},r.getValueOrDefault("recommendations.placements",{}));return{renderPlacements:p}}),define("nord/feature/recommendations/util/getSkuForSize",["nord/config","nord/feature/recommendations/util/eachPlacement"],function(e){return function(){var t,r,n=!1,a=e.getValueOrDefault("product",{}),i=e.getValue("product.selectedSku"),o="recommendations.v2.skuForSize";
if(-1!==i.skuId)e.setValue(o,i.skuId),n=!0;else if(Array.isArray(a.skus)&&i.size)for(t=0,r=a.skus.length;r>t;t++)if(a.skus[t].size===i.size){e.setValue(o,a.skus[t].id),n=!0;break}return n}}),define("nord/feature/recommendations/sources/fashionSearch",["jquery","nord/config","nord/feature/util/cookie","nord/feature/util/querystring","nord/feature/recommendations/util/timingUtil"],function(e,t,r,n,a){function i(r,n,i){var s;0!==r.length&&(s={keywordSortEngine:"",segmentid:"",resultsmode:"fashionsonly",format:"json",pageType:t.getValueOrDefault("analytics.categoryName",""),fashionids:r.join(",")},l&&"USD"!==l&&(s.currency=l),o=Date.now(),e.ajax({url:t.getValue("urls.store")+"FashionSearch.axd",data:s,dataType:"json"}).done(function(e){a.saveMeasurementValue("recsFashionSearch",Date.now()-o),n(e)}).fail(function(e){i(e)}))}var o,s=n.deserialize(r.load("internationalshippref")||""),l=s&&s.preferredcurrency;return{init:i}}),define("nord/util/string/toBoolean",[],function(){return function(e){return"object"!=typeof e&&isNaN(+e)?/^true$|^y(es)?$/i.test(e):!!+e}}),define("nord/feature/recommendations/util/shopperProductPrefs",[],function(){function e(e,t){try{return window.localStorage?JSON.parse(window.localStorage.getItem(e))||t:void 0}catch(r){if(t)return window.localStorage.setItem(e,JSON.stringify(t)),t}}var t="shopperPrefs",r={normalized:{size:{"women: apparel":[],"women: bras":[],"men: apparel":[],"men: apparel-pants":[],"men: dress-shirts":[],"baby: apparel-infant":[],"women: shoes":[],"men: shoes":[],"kids: shoes":[],"unisex/men: shoes":[],"girl: apparel":[],"boy: apparel":[],"men: shorts":[],"men: suits":[]}}};return{saveNormalizedSize:function(n,a){var i,o,s=3;n&&Array.isArray(a)&&(i=e(t,r),i&&(i.normalized&&i.normalized.size&&a.forEach(function(e){Array.isArray(i.normalized.size[n])?(o=i.normalized.size[n],o.push(e),o.length>s&&(i.normalized.size[n]=o.slice(o.length-s))):i.normalized.size[n]=[e]}),window.localStorage.setItem(t,JSON.stringify(i))))},getNormalizedShopperSizeData:function(){var n=e(t,r)||{};return n&&n.normalized&&n.normalized.size}}}),define("nord/feature/recommendations/sources/recommendo.v2",["jquery","nord/config","nord/feature/util/querystring","nord/util/string/toBoolean","nord/feature/recommendations/util/shopperProductPrefs","nord/feature/recommendations/util/timingUtil"],function(e,t,r,n,a,i){function o(e){var t,r,n,a=[],i=[];for(t=0,r=e.products.length;r>t;t++)n=e.products[t],n.product_id&&(i.push(n.product_id),a.push(l(n,e)));return{headerText:e.headline,productIds:i,products:a,strategy:Array.isArray(e.strategiesWithRecs)?e.strategiesWithRecs.join("%").replace(" ","_"):""}}function s(e){var r={},n=t.getValue("urls.image");return e.seed_product&&(e.placement_media&&(r={seedHeaderText:e.placement_media.seed_header_text,seedHeaderGraphic:n+g+e.placement_media.seed_header_graphic,recsHeaderText:e.placement_media.recs_header_text,recsHeaderGraphic:n+g+e.placement_media.recs_header_graphic}),r.seedProduct=l(e.seed_product,e)),r}function l(e,r){{var a,i,o,s,l=0,u=[],c=[];t.getValueOrDefault("recommendations.v2.skuForSize",null)}if(s=e.product_url?e.product_url.split("/")[4]:"",e.rollup&&Array.isArray(e.rollup.colors))for(a=0,i=e.rollup.colors.length;i>a;a+=1)o=e.rollup.colors[a],o.swatch_url&&o.image_url&&(u.push(o.swatch_url.replace(/\/|\.jpg/g,"")),c.push({StandardColors:[{StandardColor:""}],ColorName:o.name,productImageUrl:o.image_url&&"/"+o.image_url,Selected:e.image_url===o.image_url,SpriteIndex:l,swatchImageUrl:o.swatch_url&&"/"+o.swatch_url}),l++);return{ViewData:{Strategy:e.strategy||(Array.isArray(r.strategiesWithRecs)?r.strategiesWithRecs.join("%").replace(" ","_"):"")},AgeGroup:e.age_group,Available:!0,AverageRating:parseFloat(e.average_review)||0,BrandLabelId:e.brand_id,BrandLabelName:e.brand,CampaignTier:0,CategoryTier:0,FreeShipping:!1,Id:parseFloat(e.product_id),IsBeauty:!1,IsDesigner:!1,IsOutfit:!1,IsAvailableInStoreGlobally:!1,IsAvailableInStoreLocally:!1,MasterRank:9999999,MaximumPrice:parseFloat(e.max_price),MinimumPrice:parseFloat(e.min_price),MoreColors:!1,MultipleColors:!1,MultipleViews:!0,New:n(e.new_item),NumberReviews:e.number_reviews,OriginalMaximumPrice:null,OriginalMinimumPrice:null,PathAlias:s,PercentOff:null,PhotoPath:e.image_url&&"/"+e.image_url,AltPhotoPath:e.alt_image_url&&"/"+e.alt_image_url,VideoMediumUrl:"",PickUpInStore:null,PickUpInStoreEligible:!1,PriceDisplay:{PercentOff:e.custom_percent_off,RegularPrice:e.custom_regular_price,SalePrice:e.custom_sale_price},QuickViewEnabled:!1,SaleType:parseFloat(e.sale_type),SpecialTreatmentTypes:0,StyleNumber:0,SuppressMoreColorsFlag:0,SuppressPrice:!1,IsUMAPPED:n(e.is_umap_enabled),Highlight:e.custom_highlight,HighlightStyle:e.custom_highlight_style,Gender:e.gender,InfoDivStyleName:"",ParentProductTypeId:e.classifier_id,Title:e.title,IsFCAvailable:!1,SkuStores:[],SpriteName:u.join("-"),AvailableColors:c}}function u(t,r,n,l){var u,c,d,f,g,v=1,y={},w=!1;if(i.saveMeasurementValue("recsRecommendo",Date.now()-p),h=!1,!Array.isArray(r)||!r.length)return void l(m,"Empty Response");for(u=0,c=r.length;c>u;u++)f=r[u],d=f.placement_name,f.seed_product&&(d+="-"+v++),y[d]={},t[d]&&Array.isArray(r[u].products)&&r[u].products.length&&(e.extend(y[d],o(f),s(f)),w||(g=f.filters,g&&g.normalized_size_type&&g.normalized_size&&(a.saveNormalizedSize(g.normalized_size_type,g.normalized_size),w=!0)));n(m,y)}function c(e){var r,n,i,o,s,l={},u=t.getValue("product.styleId"),d=t.getValue("recommendations.v2.skuForSize");o={groups:[],customer_id:t.getValueOrDefault("shopper.id",""),apiKey:t.getValue("recommendations.v2.sources."+m+".apiKey")};for(i in e){if(n=e[i],n.groupName){if(l[n.groupName])continue;r={bound:3,placement:n.groupName},l[n.groupName]=!0}else r={bound:n.maxRecs,placement:i};d!==c.lastSkuForSize?(r.filters=r.filters||{},r.filters.sku_for_size=d):t.getValue("features.isSizeSpecificRecsEnabled")&&(n.featureFlags.isSizePreferenceEnabled||n.featureFlags.isSizeFilterEnabled)&&(s=a.getNormalizedShopperSizeData(),s&&(n.featureFlags.isSizeFilterEnabled?(r.filters=r.filters||{},r.filters.size=s):n.featureFlags.isSizePreferenceEnabled&&(r.prefs=r.prefs||{},r.prefs.size=s))),u&&(r.product_id=u),t.getValueOrDefault("features.isEarlyAccessEnabled",!1)&&t.getValueOrDefault("shopper.isEarlyAccessEligible",!1)&&(r.filters=r.filters||{},r.filters.allow_sales=[4,8]),o.groups.push(r)}return c.lastSkuForSize=d,o}function d(n,a,i){var o=c(n),s=t.getValueOrDefault("features.isDataLabRecsEnabled",!1);return!h&&s&&o&&Array.isArray(o.groups)&&o.groups.length?(h=!0,p=Date.now(),void e.ajax({url:t.getValue("recommendations.v2.sources."+m+".apiUrl"),data:r.deepSerialize(o),dataType:"jsonp",jsonpCallback:"ndl_callback"}).done(function(e){u(n,e,a,i)}).fail(function(e){i(m,e)})):void console.log("Source locked: "+h)}var p,f={},h=!1,m="Data Lab Recommendo V2",g="default/shop/image/recommendations/";return f[m]={init:d},f}),define("nord/feature/recommendations/util/shopperSegment",["nord/config","nord/feature/util/cookie"],function(e,t){var r,n=null,a=e.getValue("shopper.id"),i=e.getValue("shopper.shipToCountry")||"US",o=t.load(e.getValueOrDefault("cookies.personalization","personalization"),!0)||{},s=o.ShopperSegment;return"US"===i&&a===o.ShopperId&&s&&(r=s.replace(/\s/g,"").match(/\|(.+)\:/),r&&(n=r[1])),n}),define("nord/feature/recommendations/sources/richRelevance.api",["jquery","nord/config","nord/util/string/toBoolean","nord/feature/util/querystring","nord/feature/recommendations/util/getPageType","nord/feature/recommendations/util/shopperSegment","nord/feature/recommendations/util/timingUtil"],function(e,t,r,n,a,i,o){function s(e){var t,r,a,i,o=[],s=[],c="";for(t=0,r=e.recommendedProducts.length;r>t;t++)a=e.recommendedProducts[t],m=a.attributes,c||(c=n.deserialize(a.clickURL)),i=l(m.styleID),i&&(s.push(i),o.push(u(a,e)));return{headerText:e.strategyMessage,productIds:s,products:o,strategy:c&&c.stid}}function l(e,t){return t=t||0,Array.isArray(e)&&t<e.length?e[t]:e}function u(e){var t,a,i,o=0,s="",u=[],d=l(m.swatchUrl),p=n.deserialize(e.clickURL),f=[];if(m=e.attributes,i=m.colors,Array.isArray(i)&&Array.isArray(m.swatchUrl)&&m.swatchUrl.length)for(u=c(m.swatchUrl[0]),t=0,a=i.length;a>t;t++)s=l(u,t),s&&(f.push({StandardColors:[{StandardColor:""}],ColorName:i[t],productImageUrl:null,SpriteIndex:o,swatchImageUrl:s&&"/"+s+".jpg"}),o++);return{ViewData:{TrackingUrl:e.clickURL,Strategy:p&&p.stid},AgeGroup:l(m.ageGroupID),AverageRating:+e.rating.toFixed(2),BrandLabelId:l(m.brandLabelID),BrandLabelName:l(m.brand),Id:parseFloat(l(m.styleID)),IsOutfit:r(l(m.isOutfit)),MaximumPrice:parseFloat(l(m.minPrice)),MinimumPrice:parseFloat(l(m.maxprice)),New:r(l(m.newItemFlag)),NumberReviews:e.numReviews,PathAlias:l(m.pathAlias),PhotoPath:e.imageURL&&"/"+e.imageURL+".jpg",PriceDisplay:{PercentOff:l(m.PercentOff),RegularPrice:l(m.RegularPrice),SalePrice:l(m.SalePrice)},SaleType:parseFloat(l(m.saleFlag)),IsUMAPPED:r(l(m.isUmapEnabled)),Highlight:l(m.Highlight),HighlightStyle:l(m.HighlightStyle),InfoDivStyleName:l(m.InfoDivStyleName),Title:e.name,SpriteName:d&&d.replace(/\//g,"").replace(/,/g,"-"),AvailableColors:f}}function c(e){return"string"==typeof e?e.split(","):e}function d(t,r,n,a){var i,l,u,c,p={},f=r.placements;if(!d.hasRun){if(o.saveMeasurementValue("recsRRAPI",Date.now()-g),d.hasRun=!0,!Array.isArray(f)||!f.length)return void a(w,"Empty Response");for(i=0,l=f.length;l>i;i++)c=f[i],u=c.placement.replace(/.*\./,""),p[u]={},t[u]&&e.extend(p[u],s(c));n(w,p)}}function p(e){var r,n,o,s,l,u,c=t.getValue("orderInfo"),d=[],p=[],f=[],h=[],m=[];if(l={jsonp:"true",apiClientKey:"3c86c35d5f315680",sessionId:t.getValueOrDefault("shopper.sessionId",""),userId:t.getValueOrDefault("shopper.id",""),apiKey:t.getValue("recommendations.v2.sources."+w+".apiKey"),chi:t.getValue("analytics.pageCategoryId"),productId:t.getValue("product.styleNumber"),cts:t.getValue("urls.store"),categoryData:!1,excludeHtml:!0,pref:window.document.referrer,ts:+new Date},c&&c.items){for(l.o=c.orderId,r=0,n=c.items.length;n>r;r++)u=c.items[r].orderItemsPrice.replace(/[^0-9.]/g,""),d.push(c.items[r].styleNumber),h.push(c.items[r].orderItemsQuantity),p.push(u),f.push(100*+u);l.productId=d.join(y),l.pp=p.join(y),l.ppc=f.join(y),l.q=h.join(y)}"search_page"===a&&(s=/keyword=([^&]*)/.exec(location.href),s&&(l.searchTerm=s[1])),i&&(l.sgs=i+":"+i),t.getValueOrDefault("features.isEarlyAccessEnabled",!1)&&t.getValueOrDefault("shopper.isEarlyAccessEligible",!1)&&(l.sgs+="|earlyAccess:earlyAccess");for(o in e)m.push(a+"."+o);return l.placements=m.join(y),l}function f(r,a,i){var o=p(r),s=t.getValueOrDefault("features.isRRRecsEnabled",!1),l=n.deserialize(location.search),u=l.r3_env||t.getValueOrDefault("recommendations.v2.sources."+w+".environment","recs");s&&!h&&o&&(h=!0,g=Date.now(),e.ajax({url:"//"+u+".richrelevance.com/rrserver/api/rrPlatform/recsForPlacements",data:o,dataType:"jsonp",jsonp:"jcb",jsonpCallback:"process"}).done(function(e){d(r,e,a,i)}).fail(function(e){i(w,e)}))}var h,m,g,v={},y="|",w="Rich Relevance Recs API";return v[w]={init:f},v}),define("nord/feature/recommendations/sources/richRelevance.myRecs.api",["jquery","nord/config","nord/util/string/toBoolean","nord/feature/recommendations/util/getPageType","nord/feature/recommendations/util/shopperSegment","nord/feature/recommendations/util/timingUtil","nord/feature/util/querystring"],function(e,t,r,n,a,i,o){function s(e,t){var r,n,a,i,o=[],s=[];for(r=0,n=t.recommendedProducts.length;n>r;r++)a=u(e,t.recommendedProducts[r],t),i=a.Id,i&&(s.push(i),o.push(a));return{headerText:t.message,productIds:s,products:o}}function l(e,t){var r,n={};return t.seedProduct?("ProductViewedViewed"===t.strategyName?r="You Viewed":"ProductBoughtBought"===t.strategyName&&(r="You Bought"),n.seedHeaderText=r,n.recsHeaderText=t.message,n.seedProduct=u(e,t.seedProduct,t)):n.recsHeaderText=t.message,n}function u(e,r){var n=o.deserialize(r.clickURL),a=n.ct.match(/[0-9 -()+]+$/)[0],i=r.id,s=t.getValueOrDefault("recommendations.v2.sources."+g+".environment","recs"),l=d(e);return{ViewData:{TrackingUrl:r.clickURL},Available:!0,AverageRating:r.rating,BrandLabelName:r.brand,Id:a,NumberReviews:r.numReviews,PhotoPath:r.imageURL&&"/"+r.imageURL+".jpg",StyleNumber:i,Title:r.name,RejectSeedLink:"http://"+s+".richrelevance.com/rrserver/api/rrPlatform/doNotUse?apiClientKey="+l.apiClientKey+"&apiKey="+l.apiKey+"&userId="+l.userId+"&sessionId="+l.sessionId+"&productId="+i}}function c(t,r,n,a){var o,u,d,p,f,m=1,v={},y=r.strategyResults,w=e.map(t,function(e,t){return t}).length;if(!c.hasRun){if(i.saveMeasurementValue("recsRRMyRecsAPI",Date.now()-h),c.hasRun=!0,!Array.isArray(y)||!y.length)return void a(g,"Empty Response");for(d in t){p=t[d].groupName;break}for(o=0,u=w;u>o;o++)f=y[o],f&&f.recommendedProducts&&f.recommendedProducts.length&&(d=p+"-"+m++,v[d]={},e.extend(v[d],s(t,f),l(t,f)));n(g,v)}}function d(r){var n,a,i;for(i in r){a=r[i].maxRecs;break}return e.isPlainObject(r)&&(n={jsonp:"true",apiClientKey:t.getValue("recommendations.v2.sources."+g+".apiClientKey"),sessionId:t.getValueOrDefault("shopper.sessionId",""),userId:t.getValueOrDefault("shopper.id",""),apiKey:t.getValue("recommendations.v2.sources."+g+".apiKey"),recProductsCount:a,categoryData:!1}),n}function p(r,n,a){var i=d(r),s=t.getValueOrDefault("features.isRRRecsEnabled",!1),l=o.deserialize(location.search),u=l.r3_env||t.getValueOrDefault("recommendations.v2.sources."+g+".environment","recs");s&&!f&&i&&(f=!0,h=Date.now(),e.ajax({url:"//"+u+".richrelevance.com/rrserver/api/rrPlatform/myRecs",data:i,dataType:"jsonp",jsonpCallback:"jsonCallback"}).done(function(e){c(r,e,n,a)}).fail(function(e){a(g,e)}))}var f,h,m={},g="Rich Relevance MyRecs API";return m[g]={init:p},m}),define("nord/feature/recommendations/util/recsBoomrPlugin",["jquery"],function(){function e(){t&&t.plugins&&t.plugins.recs&&t.plugins.recs.setComplete()}var t=window.BOOMR,r=!1;return t&&(t.plugins=t.plugins||{},t.plugins.recs={is_complete:function(){return r},setComplete:function(){r=!0,"function"==typeof t.sendBeacon&&t.sendBeacon()}}),{setComplete:e}}),define("nord/feature/util/queryString",["jquery"],function(e){function t(e,t,r,n){var a,i=new RegExp("([?&])"+t+"=[^&$]*","i");return n="string"==typeof n?n:"?",a=0!==e.length?"&":n,e.match(i)?e.replace(i,"$1"+t+"="+r):e+a+t+"="+r}function r(t,r){var n,a={};if(r="string"==typeof r?r:"?","string"!=typeof t)throw new Error("nord/util/querystring: the deserialize method only accepts strings.");return n=t.indexOf(r),n>=0&&(t=t.substr(n+1)),e.each(t.split("&"),function(e,t){var r,n,i=t.split("=");i.length>0&&(r=decodeURIComponent(i.shift()),n=i.length>0?decodeURIComponent(i.shift()):void 0,"undefined"==typeof a[r]?a[r]=n:a[r].constructor===Array?a[r].push(n):a[r]=[a[r],n])}),a}function n(t,r){return r="string"==typeof r?r:"?",t=e.param(t),t=t?r+t:""}function a(t,r){function n(t,r){r=e.isFunction(r)?r():r?r:"",a.pairs[a.pairs.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)}var i;if(Array.isArray(r))r.forEach(function(e,r){a(t+"["+r+"]",e)});else if("object"===e.type(r))for(i in r)a(t+"["+i+"]",r[i]);else n(t,r)}function i(t){return a.pairs=[],e.each(t,function(e,t){a(e,t)}),a.pairs.join("&").replace(/%20/g,"+")}return{deserialize:r,serialize:n,deepSerialize:i,updateParameter:t}}),define("nord/feature/recommendations/util/tagUtil",["jquery","nord/config","nord/feature/util/queryString"],function(e,t,r){function n(){var e,t,r,n;this._isProductPage()&&(e=this._getParameterByName(f),t=this._getParameterByName(d),r=this._getParameterByName(p),n=this._getParameterByName(c),(t||r||e)&&(window.recsBrightTagData.recsClickData=this._createRecData(e,t,r,n)))}function a(e,t,r,n){var a,i;n&&n.length&&(a=n.join("_"),i=this._createRecData(e,t,r,a),i&&(window.recsBrightTagData.recsOnPage+=i+"|"))}function i(e){var t;return e?(t=r.deserialize(this._getCurrentUrl()),t?t[e]:""):""}function o(){return window.location.search}function s(){var e,t=[];for(e=0;e<arguments.length;e++)arguments[e]&&t.push(arguments[e]);return t.length>0?t.join(":"):""}function l(){return t.getValueOrDefault("product",!1)&&t.getValueOrDefault("analytics.pageType","")===u}var u="Product Page",c="recs_strategy",d="recs_placementId",p="recs_source",f="recs_referringPageType";return window.recsBrightTagData={recsOnPage:"",recsClickData:""},{setSignalDataForPlacement:a,setRecsClickData:n,_getParameterByName:i,_getCurrentUrl:o,_createRecData:s,_isProductPage:l}}),define("nord/feature/recommendations/recEngine.v2",["jquery","nord/config","nord/feature/util/cookie","nord/feature/util/querystring","nord/feature/recommendations/util/renderPlacements","nord/feature/recommendations/util/getSkuForSize","nord/feature/recommendations/sources/fashionSearch","nord/feature/recommendations/sources/recommendo.v2","nord/feature/recommendations/sources/richRelevance.api","nord/feature/recommendations/sources/richRelevance.myRecs.api","nord/feature/recommendations/util/timingUtil","nord/feature/recommendations/util/recsBoomrPlugin","nord/feature/recommendations/util/tagUtil"],function(e,t,r,n,a,i,o,s,l,u,c,d,p){function f(){t.getValue("features.isRecsEnabled")&&t.getValue("recommendations.placements")&&(c.saveMeasurement("recsStartTime"),this._addSKUClickHandler(),this._getRecsData(),p.setRecsClickData())}function h(r){var n,a,i,o,c=t.getValue("recommendations.placements"),d={},p=e.extend({},s,l,u);for(i in c)o=c[i],n=o.recsSource,d[n]=d[n]||{},d[n][i]=o;for(n in d)d.hasOwnProperty(n)&&(a=p[n],c=d[n],a&&(Array.isArray(r)&&r.length?this._refreshPlacements(n,a,c,r):(a.init(c,v.bind(this),y.bind(this)),x.push(n))))}function m(){var r=this;t.getValueOrDefault("features.isShopperPrefsCollectionEnabled",!1)&&e(function(){e(document).off("pdp.customizationButtonClicked").on("pdp.customizationButtonClicked",function(n,a){e(a).filter("#size-buttons li").length>0&&t.getValue("product.selectedSku.size")&&i()&&r._getRecsData(["isSizePreferenceEnabled","isSizeFilterEnabled"])})})}function g(t,r,n,a){var i,o,s={},l=a.length;for(o in n)if(n.hasOwnProperty(o))for(i=0;l>i;i++)if(n[o].featureFlags[a[i]]){s[o]=n[o];break}e.isEmptyObject(s)||(r.init(s,v.bind(this),y.bind(this)),x.push(t))}function v(t,r){var n={},i="",s=this;x.splice(x.indexOf(t),1);for(i in r)r.hasOwnProperty(i)&&(s._fashionSearchRequired(t,i)?s._pushProductsForFashionSearch(t,i,r[i]):(n[i]||(n[i]={}),e.extend(n[i],r[i])),p.setSignalDataForPlacement(i,t,r[i].strategy,r[i].productIds));!x.length&&D.length>0&&o.init(D,w.bind(this),y.bind(this)),a.renderPlacements(t,n),b()}function y(e,t){console.log(e+"-"+t),x.splice(x.indexOf(e),1),!x.length&&D.length>0&&(o.init(D,w.bind(this),y.bind(this)),D=[]),b()}function w(e){var t="";this._integrateFashionSearchResponse(T,e);for(t in T)T.hasOwnProperty(t)&&a.renderPlacements(t,T[t]);D=[],T={},b()}function b(){0===x.length&&0===D.length&&d.setComplete()}function S(t,r,n){T[t]||(T[t]={}),T[t][r]={},e.extend(T[t][r],n),void 0!==n.productIds&&(D=D.concat(n.productIds),n.seedProduct&&(D=D.concat(n.seedProduct.Id)))}function P(e,a){var i=n.deserialize(r.load("internationalshippref")||""),o=i&&i.preferredcurrency,s=o&&"USD"!==o,l=t.getValueOrDefault("features.isFashionSearchRecsEnabled",!0),u="recommendations.placements."+a+".featureFlags.isFashionSearchEnabled",c=t.getValueOrDefault(u,!1);return s||c&&l}function C(t,r){var n,a,i,o,s,l={},u=-1,c="",d="",p="";if(r&&r.Fashions&&r.Fashions.length){for(n=0;n<r.Fashions.length;n++)i=r.Fashions[n],l[i.Id]=i;for(d in t)if(t.hasOwnProperty(d)){o=t[d];for(p in o)if(o.hasOwnProperty(p)){for(a=o[p],u=a&&a.productIds?a.productIds.length:u;u>0;)u--,c=a.productIds[u],l[c]?e.extend(!0,a.products[u],l[c]):(a.products.splice(u,1),a.productIds.splice(u,1));o[p].seedProduct&&(s=parseInt(o[p].seedProduct.Id,10),l[s]&&e.extend(!0,o[p].seedProduct,l[s]))}}}}function A(e){x=e}function I(e){T=e}var D=[],x=[],T={};return{init:f,version:"3.1.0",_getRecsData:h,_addSKUClickHandler:m,_handleRecsResponse:v,_handleError:y,_refreshPlacements:g,_handleFashionSearchResponse:w,_fashionSearchRequired:P,_pushProductsForFashionSearch:S,_integrateFashionSearchResponse:C,_setRecSourcesInProcess:A,_setPlacementDataForFashionSearch:I}}),define("text!htmlTemplate/dialog/unsupportedBrowser.html",[],function(){return'<aside class="header-message-panel">\r\n	<strong><span class="sprite sprite-triangle-exclamation-28x28"></span>You&#39;re using a browser we no longer support ({{name}} {{version}}).</strong>\r\n	Upgrading to a newer version is easy, and it will make your experience even better. <a href="{{upgradeURL}}" target="_blank">Upgrade Your Browser</a>\r\n	<a href="#" class="close sprite sprite-close-sm ir" title="Close this dialog">Close this dialog</a>\r\n</aside>\r\n'}),define("text!htmlTemplate/dialog/emailNotification.html",[],function(){return'<aside class="header-email-notification">\r\n	<div class="header-email-notification-content">\r\n		<img class="headline" src="{{filePath}}default/shop/image/common/email-acquisition-headline@2x.png" alt="Be the first to know style advice, trends, events and more" />\r\n		<iframe id="responsys-email-signup" src="https://em.nordstrom.com/pub/sf/ResponseForm?_ri_=X0Gzc2X%3DWQpglLjHJlYQGhzdkffLgeuwJ2TFzgniSizcmJi0IknOohVXMtX%3DWQpglLjHJlYQGuseqr9soSgyYJyyhlyjmgNW9Ezc3pJ6&_ei_=EuyPn06xy_sji43AueRwtYA"></iframe>\r\n		<a href="#" class="close sprite sprite-close-sm ir" title="Close this dialog">Close this dialog</a>\r\n	</div>\r\n</aside>\r\n'}),define("nord/feature/dialog/headerMessagePanel",["jquery","mustache","nord/config","nord/feature/util/cookie","text!htmlTemplate/dialog/unsupportedBrowser.html","text!htmlTemplate/dialog/emailNotification.html"],function(e,t,r,n,a,i){function o(){n.load("browserupgradeoptout")||(/browserdebug/.test(location.search)?f(".header-message-panel","#shopper-nav-wrap",a,{name:"Test Browser",version:1,upgradeURL:"http://www.nordstrom.com/"}):l()),!s()||m||n.load("emailnotificationshown")||(f(".header-email-notification",".global-promo-bar","emailnotificationshown",i,{filePath:h}),u())}function s(){return"US"===n.getValue("internationalshippref","preferredcountry")}function l(){if("Microsoft Internet Explorer"===navigator.appName){var e,t=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!==r.exec(t)&&(e=parseFloat(RegExp.$1),e>-1&&8>e&&(f(".header-message-panel","#shopper-nav-wrap","browserupgradeoptout",a,{name:"Internet Explorer",version:e,upgradeURL:"http://windows.microsoft.com/en-us/internet-explorer/download-ie/"}),u()))}}function u(){window.addEventListener("message",c,!1)}function c(e){var t=e.data,r="https://em.nordstrom.com";e.origin===r&&"Success!"===t&&d("emailnotificationshown",v)}function d(e,t){var r=new Date;t?(r.setYear(r.getFullYear()+t),n.save(e,1,{expires:r,domain:g})):n.save(e,1,{domain:g})}function p(t,r){var n=e(t);n.find(".close").on("click",function(t){t.preventDefault(),t.stopPropagation(),d(r,v),n.fadeTo(250,0,function(){e(this).slideUp(250)})})}function f(r,n,a,i,o){var s=e(n),l=e(t.render(i,o));s.before(l).slideDown(250),d("emailnotificationshown"),p(r,a)}var h=r.getValue("urls.image"),m=/https/.test(location.protocol),g="nordstrom.com",v=1;return{init:o}}),define("text!htmlTemplate/promotions/globalStylistPromo.html",[],function(){return'<div class="stylists-promo">\r\n	<p>\r\n		Expert style advice. Free appointments. Zero pressure.\r\n	</p>\r\n	<a href="/c/personal-stylists">Learn More About Personal Stylists.</a>\r\n	<a class="sprite sprite-caret-up-sm" href="#">Close</a>\r\n</div>\r\n'}),define("nord/feature/globalPromos/globalStylistPromo",["jquery","text!htmlTemplate/promotions/globalStylistPromo.html"],function(e,t){function r(){if(window.nord.config.settings.tto.banner){var r=e("#text-promotion-barpromo").html(t).attr("id","text-promotion-stylists");window.nord.config.settings.tto.collapse||r.addClass("expanded").on("click.expand","a.sprite",function(e){e.preventDefault(),r.removeClass("expanded")})}}return r}),define("nord/feature/dialog/internationalWelcome",["jquery","nord/config","nord/feature/util/scriptLoader"],function(e,t,r){var n=function(){var n="https://embassy.fiftyone.com/welcome/welcome.srv?merchId=1620&setCookie=Y&countryId=",a=document.cookie.indexOf("wlcme=")>-1,i=t.getValueOrDefault("shopper.shipToCountry","US"),o="string"!=typeof i||"US"!==i&&""!==i,s=o?610:655,l=o?400:740,u=o?"https://em.nordstrom.com/pub/sf/ResponseForm?_ri_=X0Gzc2X%3DWQpglLjHJlYQGu0y8u0ETHkkJMH4LqfCpWI5069b9RVXMtX%3DWQpglLjHJlYQGga4wWKggCEH8Y9hTj7qqobfYWtfvR&_ei_=EiJVlQ2fyQIH2XoXQk0xR30":"https://em.nordstrom.com/pub/rf?_ri_=X0Gzc2X%3DWQpglLjHJlYQGutzbmR0vHUuGizf5mFISrP8FnMRVwjpnpgHlpgneHmgJoXX0Gzc2X%3DWQpglLjHJlYQGggkiytwrrAHmKgsimB2PM8MGn&FORM_ID=GEC&SOURCE_GEC=BOTTOM_NAV";o&&!a&&r.load(n+i),e("#footer-email-signup").attr({"data-popup-height":s,"data-popup-width":l,href:u})};n()}),define("nord/feature/util/thirdParty",["jquery","nord/config","nord/feature/util/scriptLoader"],function(e,t){{var r=t.getValueOrDefault("urls",{image:"http://i.nordstromimage.com/images/",about:"http://about.nordstrom.com/"});r.image,r.about}}),define("nord/feature/layout/persistentTile",["jquery"],function(e){function t(){var e,t=0!==s.length&&s?n.scrollTop()<=s.offset().top+s.outerHeight(!0)-i:!0,r=n.scrollTop()>=o.offset().top&&n.scrollTop()<=o.offset().top+o.outerHeight(!0)-i&&t;e=r?0:-i,a.css("top",e+"px")}function r(){a.css("top",-i+"px").removeClass("hidden"),n.on("scroll.persistent-tile-scroll",function(){t()}).trigger("scroll")}var n=e(window),a=e(".persistent-tile"),i=a.find("img").attr("height"),o=e("#main-content"),s=a.data("hide-target")?e("."+a.data("hide-target")).eq(parseInt(a.data("hide-after"),10)-1):!1;a.length>0&&r()}),define("nord/feature/blog/blog",["jquery"],function(e){function t(e){var t,r=e[0],a=r.permalink,i=n.find(".blog-header-wrap"),o=n.find(".blog-copy-wrap"),s=n.find(".blog-anchor-link"),l=parseInt(i.data("titleTrim"),10),u=parseInt(o.data("bodyTrim"),10),c=3,d=r.title,p=r.excerpt;d=d.length>l?d.slice(l-c,d.length)+"&hellip;":d,p=p.length>u?p.slice(u-c,p.length)+"&hellip;":p,i.html("<h2><a>"+d+"</a></h2>"),i.find("a").attr("href",a),o.html("<p>"+p+"</p><p><a>"+o.data("blogLink")+"</a></p>"),o.find("a").attr("href",a),s.length&&(s.href=a,t=s.find("img").first(),t.attr("src",r.THUMB),t.width(175))}function r(){e.ajax({url:n.data("feedUrl")+i,jsonp:"callback",dataType:"jsonp",success:function(e){t(e),n.removeClass("hidden"),a.remove()},error:function(){n.remove(),a.removeClass("hidden")}})}var n=e(".blog.json-feed"),a=e(".blog.fallback-content"),i="feed/json/";n.length&&r()}),define("nord/feature/util/svg",["jquery"],function(e){function t(){if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")){var t=e(".svg-fallback");t.each(function(){var t=e(this);t.attr("src",t.data("fallback")).removeClass("hidden")})}}var r=document.getElementsByTagName("svg");r&&t()}),define("nord/feature/util/opinionLab",["jquery","nord/config","nord/feature/navigation/popup"],function(e,t,r){function n(){e("#online-opinion-feedback-link, .opinion-lab-popup").on("click.custom.ooengine",function(e){e.preventDefault();var n=r(t.getValue("urls.store")+o,{center:!0,name:"Opinon Lab Splitter",height:a,width:i});n.location.href=t.getValue("urls.store")+o,n.document.referrer=window.location})}var a=200,i=450,o="c/customer-feedback";n()}),define("nord/feature/util/webStorage",[],function(){function e(e,t,r){var n=r||{local:!1},a="object"==typeof t?JSON.stringify(t):t,i=n.local?localStorage:sessionStorage;i.setItem(e,a)}function t(e,t){var r=t||{local:!1},n=r.local?localStorage:sessionStorage,a=n.getItem(e);try{return JSON.parse(a)}catch(i){return a}}function r(e,t){var r=t||{local:!1},n=r.local?localStorage:sessionStorage;try{return n.removeItem(e),!0}catch(a){return!1}}return{setStorageObject:e,getStorageObject:t,removeStorageObject:r}}),define("nord/feature/util/bopusStorage",["modernizr","nord/config","nord/feature/util/cookie","nord/feature/util/querystring"],function(e,t,r,n){function a(e,t){if(l&&(t||!localStorage.getItem(s)))try{localStorage.setItem(s,e),t?sessionStorage.removeItem(s):sessionStorage.setItem(s,e)}catch(r){console.log("Error writing to web storage.")}}function i(){return l&&localStorage.getItem(s)&&!sessionStorage.getItem(s)}function o(){var e,i=t.getValue("pageObj.isProd")?" session":" sessiondev",o=r.load(i),s=decodeURIComponent(o).split(","),l="RETURNURL=";return s=s.filter(function(e){return 0===e.indexOf(l)}),s.length?(e=n.deserialize(s[0].substring(l.length)))?void(e.stores&&a(!0,!0)):!1:!1}var s="bopusUser",l=e.localstorage&&e.sessionstorage;return{setBopusUserFlag:a,isBopusUser:i,detectBopusUser:o}}),define("text!htmlTemplate/preferredStore/storesAndEvents.html",[],function(){return'<span class="preferred-store hidden">Your Store</span>\r\n<span class="set-preferred-store" data-store-name="{{{storeName}}}">{{{preferredStoreMessage}}}</span>\r\n'}),define("nord/feature/preferredStore/preferredStore",["jquery","mustache","nord/feature/util/webStorage","nord/feature/util/bopusStorage","text!htmlTemplate/preferredStore/storesAndEvents.html"],function(e,t,r,n,a){function i(){return r.getStorageObject("preferredStore",{local:!0})||!1}function o(t){var r,n,a,o,s=i(),u=s?d:c;"stores-and-events"===t&&(r=e('li[data-store-type="FullLineStore"] > a'),n=e('li[data-store-type="FullLineStore"] h3 a'),r.each(function(){var t=e(this);o=t.text().replace("Nordstrom ",""),0===t.siblings(".preferred-store").length&&t.after(p({storeName:o,preferredStoreMessage:u})),o===s&&t.siblings(".preferred-store, .set-preferred-store").toggleClass("hidden")}),n.each(function(){var t=e(this);t.text()==="Nordstrom "+s&&t.before("your store, ").addClass("event-preferred-store")}),l()),"store-details"===t&&(a=e(".store-details-header > h1, .-store-header.-secondary-header"),o=a.find("span").text().replace("Nordstrom ",""),0===a.siblings(".preferred-store").length&&a.after(p({storeName:o,preferredStoreMessage:u})),o.indexOf("Rack")>=0?a.siblings(".set-preferred-store").addClass("hidden"):o===s&&(a.siblings(".set-preferred-store").addClass("hidden"),a.siblings(".preferred-store").removeClass("hidden")))}function s(t){var n=e(this),a=i(),o=n.data("store-name");a||e(".set-preferred-store").text(d),r.setStorageObject("preferredStore",o,{local:!0}),e(".preferred-store").addClass("hidden"),e(".set-preferred-store").removeClass("hidden"),n.addClass("hidden"),n.siblings(".preferred-store").removeClass("hidden"),"store-results"===t.id&&(location.reload(),l())}function l(){var t=e(".preferred-store").not(".hidden").closest("li"),r=e(".event-preferred-store").closest("li");t.prependTo(t.closest("ol")),r.prependTo(r.closest("ol")),e("html, body").animate({scrollTop:0},200)}function u(){e(document).on("storesAndEventsLoaded",function(){o("stores-and-events")}).on("storeDetailsLoaded",function(){o("store-details")}),e("#store-results, .store-details-header").on("click",".set-preferred-store",function(e){s.call(this,e.delegateTarget),n.setBopusUserFlag(!0)})}var c="Set as Your Store",d="Make This Your Store",p=t.compile(a);u()}),define("nord/global",["jquery","nord/config","nord/feature/navigation/primaryNav","nord/feature/navigation/categoryNav","nord/feature/navigation/footerNav","nord/feature/search/SearchBox","nord/featureSet/minibag","nord/feature/util/lazyLoad","nord/feature/dialog/modal","nord/feature/util/contentBootstrap","nord/feature/util/jquery.menuAim","nord/feature/util/ttoTools","nord/feature/util/windowHelper","nord/feature/recommendations/recEngine.v2","nord/feature/dialog/headerMessagePanel","nord/feature/globalPromos/globalStylistPromo","nord/feature/util/cookie","nord/feature/dialog/internationalWelcome","nord/feature/util/thirdParty","nord/feature/layout/persistentTile","nord/feature/blog/blog","nord/feature/util/svg","nord/feature/util/opinionLab","nord/feature/preferredStore/preferredStore"],function(e,t,r,n,a,i,o,s,l,u,c,d,p,f,h,m,g){function v(){r.init(),o.init(),y(),f.init(),n.init(),h.init(),a.init(),u.init(),p.addLoadEventHandler(w),m(),b()}function y(){new i
}function w(){var e=g.load(t.getValueOrDefault("cookies.personalization","personalization"),!0);"object"!=typeof e||/true/i.test(e.IsShopperInfoPrefetched)&&e.ShopperId===t.getValue("shopper.id")||require(["nord/featureSet/prefetchShopperInfo"],function(e){e.init()})}function b(){var e=t.getValueOrDefault("inspector.debugScript",!1);e&&require([e])}window.Sys={Application:{notifyScriptLoaded:e.noop}},d.callMethods("preGlobalInit"),v(),d.callMethods("postGlobalInit")}),define("raygun",function(){return window.Raygun}),define("modernizr",function(){return window.Modernizr}),define("lazyload",["thirdParty/plugin/jquery.lazyload.min"],function(e){return e}),define("nord/config",["nord/feature/mainModules/config"],function(e){return e}),require(["require","jquery","nord/feature/mainModules/polyfills","nord/feature/util/console","nord/feature/util/querystring","nord/global"],function(e,t,r,n,a){function i(){var e;performance&&performance.timing&&(e="function"==typeof performance.now?performance.now():+new Date-performance.timing.navigationStart,window.nord.timers=window.nord.timers||{},window.nord.timers.pginteractive=e-(performance.timing.responseEnd-performance.timing.navigationStart))}function o(){var r=[];t("[data-modules]").each(function(){var e=t(this).data("modules");"undefined"!=typeof e&&r.push(e)}),r=r.join(",").split(/\s*,\s*/);var a=[];t.each(r,function(e,r){-1===t.inArray(r,a)&&a.push(r)}),r=a,r.length>0?e(r,function(){for(var e=0,t=r.length;t>e;e++)n.log("Nordstrom.com: "+r[e]+" module loaded.");i()}):i()}a.deserialize(window.location.search).debug&&n.enable(),t(o)}),define("nordMain",function(){});
//# sourceMappingURL=nordMain.js.map